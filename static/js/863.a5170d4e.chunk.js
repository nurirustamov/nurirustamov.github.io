"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[863],{3164:(e,a,n)=>{n.d(a,{A:()=>x});var t=n(9379),s=n(5043),r=n(4450),l=n(1425),i=n(3918),o=n(579);const c=()=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d=e=>{let{isOpen:a,onClose:n,onAddTags:t,uniqueTags:i,existingTags:c}=e;const[d,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(new Set),h=(0,s.useMemo)(()=>{const e=d.toLowerCase();return i.filter(a=>!c.includes(a)&&a.toLowerCase().includes(e))},[i,c,d]);return(0,o.jsxs)(l.A,{isOpen:a,onClose:n,title:"Bankdan teq se\xe7in",children:[(0,o.jsx)("input",{type:"text",placeholder:"Teq axtar...",value:d,onChange:e=>m(e.target.value),className:"w-full p-2 mb-4 border border-gray-300 rounded-md"}),(0,o.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:h.map(e=>(0,o.jsxs)("label",{className:"flex items-center p-2 rounded-md hover:bg-gray-100 cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",checked:u.has(e),onChange:()=>(e=>{const a=new Set(u);a.has(e)?a.delete(e):a.add(e),x(a)})(e),className:"h-4 w-4 text-orange-600 rounded mr-3"}),e]},e))}),(0,o.jsx)("div",{className:"mt-6 flex justify-end",children:(0,o.jsxs)(r.A,{onClick:()=>{t(Array.from(u)),n(),x(new Set),m("")},disabled:0===u.size,children:["Se\xe7ilmi\u015fl\u0259ri \u0259lav\u0259 et (",u.size,")"]})})]})},m=e=>{let{tags:a=[],onUpdate:n,uniqueTags:t=[]}=e;const[l,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(!1),h=e=>{e&&!a.includes(e)&&n([...a,e])};return(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teql\u0259r (Enter v\u0259 ya verg\xfcl il\u0259 \u0259lav\u0259 et)"}),(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-2 p-1.5 border border-gray-300 rounded-md bg-white",children:[a.map((e,t)=>(0,o.jsxs)("span",{className:"flex items-center gap-1 bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-1 rounded-full",children:[e,(0,o.jsx)("button",{onClick:()=>{return t=e,void n(a.filter(e=>e!==t));var t},className:"text-orange-600 hover:text-orange-800",children:(0,o.jsx)(c,{className:"h-4 w-4"})})]},t)),(0,o.jsx)("input",{type:"text",value:l,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),h(l.trim()),m(""))},placeholder:"Yeni teq \u0259lav\u0259 et...",className:"flex-1 bg-transparent outline-none p-1 text-sm min-w-[120px]"}),t.length>0&&(0,o.jsx)(r.A,{onClick:()=>x(!0),variant:"secondary",size:"sm",className:"!p-1.5 !rounded-full h-6 w-6",title:"Bankdan teq se\xe7",children:(0,o.jsx)(i.c1,{className:"h-4 w-4"})})]}),(0,o.jsx)(d,{isOpen:u,onClose:()=>x(!1),onAddTags:e=>{n([...a,...e])},uniqueTags:t,existingTags:a})]})},u=e=>{var a;let{question:n,onUpdate:s}=e;const l=e=>{s((0,t.A)((0,t.A)({},n),{},{correctAnswers:[e.target.value]}))},c=e=>{s((0,t.A)((0,t.A)({},n),{},{correctAnswer:e}))},d=()=>{s((0,t.A)((0,t.A)({},n),{},{options:[...n.options,""]}))},m=()=>{s((0,t.A)((0,t.A)({},n),{},{orderItems:[...n.orderItems||[],""]}))},u=e=>{const a=e.target.value,r=(a.match(/\[(.*?)\]/g)||[]).map(e=>e.slice(1,-1));s((0,t.A)((0,t.A)({},n),{},{text:a,correctAnswers:r,options:[]}))};switch(n.type){case"single":case"multiple":return(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"Cavab variantlar\u0131"}),(0,o.jsx)("div",{className:"space-y-2",children:n.options.map((e,a)=>(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("input",{type:"single"===n.type?"radio":"checkbox",name:"correctAnswer_".concat(n.id),checked:n.correctAnswers.includes(a),onChange:()=>(e=>{if("single"===n.type)s((0,t.A)((0,t.A)({},n),{},{correctAnswers:[e]}));else{const a=n.correctAnswers.includes(e)?n.correctAnswers.filter(a=>a!==e):[...n.correctAnswers,e];s((0,t.A)((0,t.A)({},n),{},{correctAnswers:a}))}})(a),className:"h-5 w-5 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,o.jsx)("input",{type:"text",value:e,onChange:e=>((e,a)=>{const r=[...n.options];r[e]=a,s((0,t.A)((0,t.A)({},n),{},{options:r}))})(a,e.target.value),placeholder:"Variant ".concat(a+1),className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"}),(0,o.jsx)("button",{onClick:()=>(e=>{const a=n.options.filter((a,n)=>n!==e),r=n.correctAnswers.filter(a=>a!==e).map(a=>a>e?a-1:a);s((0,t.A)((0,t.A)({},n),{},{options:a,correctAnswers:r}))})(a),className:"text-gray-400 hover:text-red-500 p-1 rounded-full",children:(0,o.jsx)(i.uc,{})})]},a))}),(0,o.jsxs)(r.A,{onClick:d,variant:"secondary",className:"mt-3 text-sm",children:[(0,o.jsx)(i.c1,{})," Variant \u0259lav\u0259 et"]})]});case"textInput":return(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"D\xfczg\xfcn cavab (h\u0259rf registri n\u0259z\u0259r\u0259 al\u0131nm\u0131r)"}),(0,o.jsx)("input",{type:"text",value:n.correctAnswers[0]||"",onChange:l,placeholder:"D\xfczg\xfcn cavab\u0131 daxil edin",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"})]});case"trueFalse":return(0,o.jsxs)("div",{className:"flex items-center gap-4 pt-2",children:[(0,o.jsxs)("label",{className:"flex items-center p-3 rounded-lg hover:bg-gray-100 cursor-pointer border-2 border-transparent has-[:checked]:bg-orange-100 has-[:checked]:border-orange-300",children:[(0,o.jsx)("input",{type:"radio",name:"tf_".concat(n.id),checked:!0===n.correctAnswer,onChange:()=>c(!0),className:"h-4 w-4 text-orange-600"})," ",(0,o.jsx)("span",{className:"ml-2",children:"Do\u011fru"})]}),(0,o.jsxs)("label",{className:"flex items-center p-3 rounded-lg hover:bg-gray-100 cursor-pointer border-2 border-transparent has-[:checked]:bg-orange-100 has-[:checked]:border-orange-300",children:[(0,o.jsx)("input",{type:"radio",name:"tf_".concat(n.id),checked:!1===n.correctAnswer,onChange:()=>c(!1),className:"h-4 w-4 text-orange-600"})," ",(0,o.jsx)("span",{className:"ml-2",children:"Yanl\u0131\u015f"})]})]});case"ordering":return(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"S\u0131ralama \xfc\xe7\xfcn elementl\u0259r (d\xfczg\xfcn ard\u0131c\u0131ll\u0131qla)"}),(0,o.jsx)("div",{className:"space-y-2",children:null===(a=n.orderItems)||void 0===a?void 0:a.map((e,a)=>(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)("span",{className:"text-gray-500 font-bold",children:[a+1,"."]}),(0,o.jsx)("input",{type:"text",value:e,onChange:e=>((e,a)=>{const r=[...n.orderItems||[]];r[e]=a,s((0,t.A)((0,t.A)({},n),{},{orderItems:r}))})(a,e.target.value),placeholder:"Element ".concat(a+1),className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"}),(0,o.jsx)("button",{onClick:()=>(e=>{const a=n.orderItems.filter((a,n)=>n!==e);s((0,t.A)((0,t.A)({},n),{},{orderItems:a}))})(a),className:"text-gray-400 hover:text-red-500 p-1 rounded-full",children:(0,o.jsx)(i.uc,{})})]},a))}),(0,o.jsxs)(r.A,{onClick:m,variant:"secondary",className:"mt-3 text-sm",children:[(0,o.jsx)(i.c1,{})," Element \u0259lav\u0259 et"]})]});case"fillInTheBlanks":return(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\u0259tn v\u0259 bo\u015fluqlar"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"D\xfczg\xfcn cavablar\u0131 kvadrat m\xf6t\u0259riz\u0259 i\xe7in\u0259 al\u0131n. M\u0259s\u0259l\u0259n: `Paytaxt [Bak\u0131]`."}),(0,o.jsx)("textarea",{value:n.text||"",onChange:u,placeholder:"M\u0259tni daxil edin...",rows:"4",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"})]});case"open":return(0,o.jsxs)("div",{className:"p-3 bg-blue-50 text-blue-800 rounded-md text-sm flex items-center gap-2",children:[(0,o.jsx)(i.xm,{className:"w-5 h-5"}),(0,o.jsx)("span",{children:"Bu sual\u0131n cavab\u0131 m\xfc\u0259llim t\u0259r\u0259find\u0259n manual olaraq yoxlan\u0131lacaq."})]});default:return null}},x=e=>{let{question:a,index:n,onUpdate:l,onDelete:c,onDuplicate:d,onSaveToBank:x,onGenerateVariation:h,uniqueTags:g}=e;const[p,y]=(0,s.useState)(a);(0,s.useEffect)(()=>{y(a)},[a]),(0,s.useEffect)(()=>{const e=setTimeout(()=>{JSON.stringify(p)!==JSON.stringify(a)&&l(p)},500);return()=>clearTimeout(e)},[p,l,a]);const b=e=>{const{name:a,value:n,type:s}=e.target,r="number"===s?parseInt(n,10):n;y(e=>(0,t.A)((0,t.A)({},e),{},{[a]:r}))};return(0,o.jsxs)("div",{className:"border border-gray-200 rounded-lg shadow-sm mb-6 bg-white relative",children:[(0,o.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center bg-gray-50/50 rounded-t-lg",children:[(0,o.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,o.jsx)("span",{className:"bg-orange-500 text-white rounded-full h-8 w-8 flex items-center justify-center font-bold text-sm flex-shrink-0",children:n+1}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-500",children:"Sual\u0131n n\xf6v\xfc"}),(0,o.jsxs)("select",{name:"type",value:p.type,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm text-xs p-1",children:[(0,o.jsx)("option",{value:"single",children:"T\u0259k cavab"}),(0,o.jsx)("option",{value:"multiple",children:"Bir ne\xe7\u0259 cavab"}),(0,o.jsx)("option",{value:"textInput",children:"M\u0259tn daxil etm\u0259"}),(0,o.jsx)("option",{value:"trueFalse",children:"Do\u011fru/Yanl\u0131\u015f"}),(0,o.jsx)("option",{value:"ordering",children:"S\u0131ralama"}),(0,o.jsx)("option",{value:"open",children:"A\xe7\u0131q Sual"}),(0,o.jsx)("option",{value:"fillInTheBlanks",children:"Bo\u015fluqlar\u0131 Doldur"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-xs font-medium text-gray-500",children:"Ballar"}),(0,o.jsx)("input",{type:"number",name:"points",value:p.points||1,onChange:b,min:"1",className:"mt-1 block w-20 rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm text-xs p-1"})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(r.A,{onClick:h,variant:"secondary",className:"!p-2",title:"B\u0259nz\u0259r sual yarat (AI)",children:(0,o.jsx)(i.xm,{})}),(0,o.jsx)(r.A,{onClick:x,variant:"secondary",className:"!p-2",title:"Sual\u0131 banka \u0259lav\u0259 et",children:(0,o.jsx)(i.$n,{})}),(0,o.jsx)(r.A,{onClick:d,variant:"secondary",className:"!p-2",title:"Dublikat et",children:(0,o.jsx)(i.j,{})}),(0,o.jsx)(r.A,{onClick:c,variant:"danger",className:"!p-2",title:"Sual\u0131 sil",children:(0,o.jsx)(i.uc,{})})]})]}),(0,o.jsxs)("div",{className:"p-4 space-y-4",children:["fillInTheBlanks"===p.type?(0,o.jsx)(u,{question:p,onUpdate:y}):(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Sual\u0131n m\u0259tni"}),(0,o.jsx)("textarea",{name:"text",value:p.text,onChange:b,placeholder:"Sual\u0131n\u0131z\u0131 bura daxil edin...",rows:"2",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u015e\u0259kil URL-i (ist\u0259y\u0259 ba\u011fl\u0131)"}),(0,o.jsx)("input",{type:"text",name:"imageUrl",value:p.imageUrl||"",onChange:b,placeholder:"https://example.com/image.png",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Audio URL-i (ist\u0259y\u0259 ba\u011fl\u0131)"}),(0,o.jsx)("input",{type:"text",name:"audioUrl",value:p.audioUrl||"",onChange:b,placeholder:"https://example.com/audio.mp3",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"})]}),(0,o.jsx)(m,{tags:p.tags||[],onUpdate:e=>{y(a=>(0,t.A)((0,t.A)({},a),{},{tags:e}))},uniqueTags:g}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u0130zah (ist\u0259y\u0259 ba\u011fl\u0131)"}),(0,o.jsx)("textarea",{name:"explanation",value:p.explanation||"",onChange:b,placeholder:"D\xfczg\xfcn cavab\u0131n izah\u0131n\u0131 bura daxil edin...",rows:"2",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"})]})]}),"fillInTheBlanks"!==p.type&&(0,o.jsx)("div",{className:"p-4 bg-gray-50/50 border-t border-gray-200 rounded-b-lg",children:(0,o.jsx)(u,{question:p,onUpdate:y})})]})}},3705:(e,a,n)=>{n.d(a,{A:()=>r});var t=n(5043),s=n(579);const r=e=>{let{options:a,value:n,onChange:r,placeholder:l}=e;const[i,o]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),m=(0,t.useMemo)(()=>""===i?a:a.filter(e=>e.toLowerCase().includes(i.toLowerCase())),[i,a]);return(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>{o(e.target.value),r(e.target.value),c||d(!0)},onFocus:()=>d(!0),onBlur:()=>setTimeout(()=>d(!1),150),placeholder:l,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"}),c&&(0,s.jsx)("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-60 overflow-auto",children:m.length>0?m.map(e=>(0,s.jsx)("li",{onMouseDown:()=>(e=>{r(e),o(""),d(!1)})(e),className:"px-3 py-2 cursor-pointer hover:bg-orange-100",children:e},e)):(0,s.jsx)("li",{className:"px-3 py-2 text-gray-500",children:"N\u0259tic\u0259 tap\u0131lmad\u0131."})})]})}},4863:(e,a,n)=>{n.r(a),n.d(a,{default:()=>b});var t=n(3986),s=n(9379),r=n(5043),l=n(4450),i=n(8132),o=n(3705),c=n(1425),d=n(3164),m=n(3918),u=n(7633),x=n(4167),h=n(2450);var g=n(579);const p=["id"],y=e=>{let{isOpen:a,onClose:n,onGenerate:t,showToast:s}=e;const[i,o]=(0,r.useState)(""),[d,u]=(0,r.useState)([{type:"single",count:3}]),[x,h]=(0,r.useState)(""),[p,y]=(0,r.useState)([]),[b,f]=(0,r.useState)(5),[v,j]=(0,r.useState)(4),[N,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)("orta"),[C,S]=(0,r.useState)(!1),[_,q]=(0,r.useState)(!1),z=r.useRef(null),I=(e,a,n)=>{const t=[...d];t[e][a]="count"===a?parseInt(n,10):n,u(t)};return a?(0,g.jsxs)(c.A,{isOpen:a,onClose:n,title:"M\u0259tnd\u0259n AI il\u0259 Suallar Yarat",children:[(0,g.jsxs)("div",{className:"space-y-4 max-h-[75vh] overflow-y-auto px-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\u0259tn"}),(0,g.jsx)("textarea",{value:i,onChange:e=>o(e.target.value),rows:"10",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Suallar\u0131n yarad\u0131laca\u011f\u0131 m\u0259tni bura daxil edin..."})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fayllar (\u015f\u0259kil, .docx, .pdf)"}),(0,g.jsx)("input",{type:"file",ref:z,onChange:e=>{if(e.target.files){const a=Array.from(e.target.files);if(p.length+a.length>10)return void s("Maksimum 10 fayl y\xfckl\u0259y\u0259 bil\u0259rsiniz.");y(e=>[...e,...a])}},multiple:!0,accept:"image/*,.docx,.pdf,application/pdf",className:"hidden"}),(0,g.jsxs)(l.A,{onClick:()=>z.current.click(),variant:"secondary",size:"sm",className:"mt-1",children:[(0,g.jsx)(m.JM,{})," Fayl se\xe7"]}),p.length>0&&(0,g.jsx)("div",{className:"mt-2 space-y-2",children:p.map((e,a)=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 rounded-md text-sm",children:[(0,g.jsx)("span",{children:e.name}),(0,g.jsx)("button",{onClick:()=>{return a=e,void y(p.filter(e=>e!==a));var a},className:"text-red-500 hover:text-red-700",children:(0,g.jsx)(m.uv,{})})]},a))})]}),(0,g.jsx)("h4",{className:"font-semibold pt-2 border-t",children:"Kriteriyalar"}),(0,g.jsx)("div",{className:"space-y-2",children:d.map((e,a)=>(0,g.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[(0,g.jsxs)("select",{value:e.type,onChange:e=>I(a,"type",e.target.value),className:"p-2 border border-gray-300 rounded-md bg-white flex-grow",children:[(0,g.jsx)("option",{value:"single",children:"T\u0259k se\xe7imli"}),(0,g.jsx)("option",{value:"multiple",children:"\xc7ox se\xe7imli"}),(0,g.jsx)("option",{value:"fillInTheBlanks",children:"Bo\u015fluq doldurma"}),(0,g.jsx)("option",{value:"trueFalse",children:"Do\u011fru/Yanl\u0131\u015f"}),(0,g.jsx)("option",{value:"textInput",children:"M\u0259tn daxiletm\u0259"}),(0,g.jsx)("option",{value:"ordering",children:"S\u0131ralama"}),(0,g.jsx)("option",{value:"open",children:"A\xe7\u0131q sual"})]}),(0,g.jsx)("input",{type:"number",value:e.count,onChange:e=>I(a,"count",e.target.value),min:"1",className:"w-20 p-2 border border-gray-300 rounded-md"}),(0,g.jsx)("span",{className:"text-sm text-gray-600",children:"\u0259d\u0259d"}),(0,g.jsx)(l.A,{onClick:()=>(e=>{d.length>1&&u(d.filter((a,n)=>n!==e))})(a),variant:"danger",size:"sm",disabled:d.length<=1,children:(0,g.jsx)(m.uc,{})})]},a))}),(0,g.jsxs)(l.A,{onClick:()=>{u([...d,{type:"single",count:1}])},variant:"secondary",size:"sm",className:"w-full",children:[(0,g.jsx)(m.c1,{})," Yeni Kriteriya"]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"S\u0259viyy\u0259"}),(0,g.jsxs)("select",{value:k,onChange:e=>A(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[(0,g.jsx)("option",{value:"asan",children:"Asan"}),(0,g.jsx)("option",{value:"orta",children:"Orta"}),(0,g.jsx)("option",{value:"\xe7\u0259tin",children:"\xc7\u0259tin"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Variantlar\u0131n say\u0131"}),(0,g.jsx)("input",{type:"number",value:v,onChange:e=>j(parseInt(e.target.value,10)),min:"2",max:"6",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\xdcmumi Bal"}),(0,g.jsx)("input",{type:"number",value:b,onChange:e=>f(parseInt(e.target.value,10)),min:"1",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Teql\u0259r (verg\xfcll\u0259 ay\u0131r\u0131n)"}),(0,g.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"M\u0259s: qrammatika, ingilis dili"})]})]}),(0,g.jsxs)("div",{className:"pt-4 border-t",children:[(0,g.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",checked:C,onChange:e=>S(e.target.checked),className:"h-4 w-4 text-orange-600 rounded border-gray-300"}),(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Suallara uy\u011fun \u015f\u0259kill\u0259r tap v\u0259 \u0259lav\u0259 et (URL)"})]}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"AI h\u0259r sual \xfc\xe7\xfcn uy\u011fun v\u0259 lisenziyas\u0131z bir \u015f\u0259kil tapma\u011fa \xe7al\u0131\u015facaq."})]}),(0,g.jsxs)("div",{className:"pt-4",children:[(0,g.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",checked:_,onChange:e=>q(e.target.checked),className:"h-4 w-4 text-orange-600 rounded border-gray-300"}),(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"M\u0259tn\u0259 \u0259saslanan \xe7a\u015fd\u0131r\u0131c\u0131 cavablar yarat"})]}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"AI se\xe7m\u0259li suallar \xfc\xe7\xfcn m\u0259tn\u0259 \u0259saslanan, lakin yanl\u0131\u015f olan cavab variantlar\u0131 (distraktorlar) yaratma\u011fa \xe7al\u0131\u015facaq."})]})]}),(0,g.jsx)("div",{className:"mt-6 flex justify-end",children:(0,g.jsx)(l.A,{onClick:async()=>{if(i.trim())if(0!==d.reduce((e,a)=>e+a.count,0)){w(!0);try{await t(i,p,d,x,b,v,C,k,_),n(),o(""),y([])}catch(e){s("Sual yarad\u0131lark\u0259n x\u0259ta ba\u015f verdi: ".concat(e.message))}finally{w(!1)}}else s("\u018fn az\u0131 bir sual yaratmal\u0131s\u0131n\u0131z.");else s("Z\u0259hm\u0259t olmasa, suallar yaratmaq \xfc\xe7\xfcn m\u0259tn daxil edin.")},disabled:N,children:N?"Yarad\u0131l\u0131r...":(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.BZ,{})," Yarat"]})})})]}):null},b=e=>{let{quiz:a,onSave:n,onBack:c,showToast:b,existingCategories:f=[],uniqueTags:v=[],onImportRequest:j,onAddFromBankRequest:N,onDraftChange:w,onSaveQuestionToBank:k,onSaveAllQuestionsToBank:A}=e;const[C,S]=(0,r.useState)(!1),[_,q]=(0,r.useState)(""),[z,I]=(0,r.useState)([]),T=e=>{const{name:n,value:t,type:r,checked:l}=e.target;let i="checkbox"===r?l:t;"datetime-local"===r&&(i=t?new Date(t).toISOString():null),w((0,s.A)((0,s.A)({},a),{},{[n]:i}))},B=e=>{w((0,s.A)((0,s.A)({},a),{},{questions:e}))},M=function(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{id:Date.now()+Math.random(),text:a,type:e,points:n,options:["",""],correctAnswers:[],correctAnswer:!0,orderItems:["",""],imageUrl:"",audioUrl:"",explanation:""}},O=e=>{B(a.questions.map(a=>a.id===e.id?e:a))},D=e=>{if(!e)return"";const a=new Date(e);return new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString().slice(0,16)};return a?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y,{isOpen:C,onClose:()=>S(!1),onGenerate:async(e,n,t,r,l,i,o,c,d)=>{const m=t.map(e=>"".concat(e.count,' \u0259d\u0259d "').concat(e.type,'" tipli sual')).join(", "),x=t.reduce((e,a)=>e+a.count,0),h=Math.max(1,Math.floor(l/x)),g=r.split(",").map(e=>e.trim()).filter(Boolean);let p="";const y=[];for(const a of n)if(a.type.startsWith("image/")||"application/pdf"===a.type){const e=await new Promise((e,n)=>{const t=new FileReader;t.readAsDataURL(a),t.onload=()=>e(t.result.split(",")[1]),t.onerror=e=>n(e)});y.push({inline_data:{mime_type:a.type,data:e}})}else if(a.name.endsWith(".docx")){const e=await a.arrayBuffer(),n=await u.convertToHtml({arrayBuffer:e}),t=document.createElement("div");t.innerHTML=n.value,p+="\n\nS\u0259n\u0259dd\u0259n m\u0259tn (".concat(a.name,"):\n").concat(t.textContent||t.innerText||"")}const f="\n            M\u0259n\u0259 veril\u0259n m\u0259tn\u0259 v\u0259 fayllara \u0259sas\u0259n, a\u015fa\u011f\u0131dak\u0131 kriteriyalara uy\u011fun test suallar\u0131 haz\u0131rla: ".concat(m,'.\n            \n            \xdcmumi Qaydalar:\n            1. N\u0259tic\u0259ni m\xfctl\u0259q v\u0259 yaln\u0131z valid JSON array format\u0131nda, he\xe7 bir \u0259lav\u0259 m\u0259tn v\u0259 ya formatlama olmadan qaytar.\n            2. H\u0259r bir obyekt a\u015fa\u011f\u0131dak\u0131 struktura malik olmal\u0131d\u0131r.\n            3. "single" v\u0259 "multiple" tipli suallar \xfc\xe7\xfcn ').concat(i,' cavab variant\u0131 olsun.\n            4. H\u0259r sual \xfc\xe7\xfcn "points" d\u0259y\u0259ri ').concat(h,' olmal\u0131d\u0131r.\n            5. H\u0259r sual \xfc\xe7\xfcn "tags" massivin\u0259 bu teql\u0259ri \u0259lav\u0259 et: ').concat(JSON.stringify(g),'.\n            6. Suallar\u0131n \xe7\u0259tinlik s\u0259viyy\u0259si "').concat(c,'" olmal\u0131d\u0131r.\n            ').concat(o?'7. H\u0259r sual \xfc\xe7\xfcn "imageUrl" sah\u0259sin\u0259 sual\u0131n m\u0259zmununa uy\u011fun, internetd\u0259n tap\u0131lm\u0131\u015f, istifad\u0259si s\u0259rb\u0259st (m\xfc\u0259llif h\xfcququ olmayan) bir \u015f\u0259kil URL-i \u0259lav\u0259 et. \u018fg\u0259r uy\u011fun \u015f\u0259kil tap\u0131lmasa, bu sah\u0259ni bo\u015f saxla ("").':"","\n            ").concat(d?'8. "single" v\u0259 "multiple" tipli suallar \xfc\xe7\xfcn yanl\u0131\u015f cavab variantlar\u0131n\u0131 (distraktorlar\u0131) m\u0259tn\u0259 \u0259saslanaraq m\u0259ntiqli, lakin \xe7a\u015fd\u0131r\u0131c\u0131 \u015f\u0259kild\u0259 t\u0259rtib et.':"",'\n\n            JSON Strukturlar\u0131:\n            - "single" \xfc\xe7\xfcn: {"text": "...", "type": "single", "options": ["A", "B", "C", "D"], "correctAnswers": [index], "points": ').concat(h,', "explanation": "...", "tags": ').concat(JSON.stringify(g),', "imageUrl": "..."}\n            - "multiple" \xfc\xe7\xfcn: {"text": "...", "type": "multiple", "options": ["A", "B", "C", "D"], "correctAnswers": [index1, index2], "points": ').concat(h,', "explanation": "...", "tags": ').concat(JSON.stringify(g),', "imageUrl": "..."}\n            - "trueFalse" \xfc\xe7\xfcn: {"text": "...", "type": "trueFalse", "correctAnswer": true, "points": ').concat(h,', "explanation": "...", "tags": ').concat(JSON.stringify(g),', "imageUrl": "..."}\n            - "fillInTheBlanks" \xfc\xe7\xfcn: {"text": "Cavab [buradad\u0131r].", "type": "fillInTheBlanks", "correctAnswers": ["buradad\u0131r"], "points": ').concat(h,', "explanation": "...", "tags": ').concat(JSON.stringify(g),', "imageUrl": "..."}\n            - "textInput" \xfc\xe7\xfcn: {"text": "...", "type": "textInput", "correctAnswers": ["d\xfczg\xfcn cavab"], "points": ').concat(h,', "explanation": "...", "tags": ').concat(JSON.stringify(g),', "imageUrl": "..."}\n            - "ordering" \xfc\xe7\xfcn: {"text": "...", "type": "ordering", "orderItems": ["Birinci", "\u0130kinci", "\xdc\xe7\xfcnc\xfc"], "points": ').concat(h,', "explanation": "...", "tags": ').concat(JSON.stringify(g),', "imageUrl": "..."}\n            - "open" \xfc\xe7\xfcn: {"text": "...", "type": "open", "points": ').concat(h,', "explanation": "...", "tags": ').concat(JSON.stringify(g),', "imageUrl": "..."}\n\n            N\xfcmun\u0259 "fillInTheBlanks" format\u0131: D\xfczg\xfcn cavablar m\u0259tnin i\xe7ind\u0259 kvadrat m\xf6t\u0259riz\u0259 [ ] il\u0259 g\xf6st\u0259rilm\u0259li v\u0259 "correctAnswers" massivind\u0259 ayr\u0131ca qeyd edilm\u0259lidir.\n            \n            M\u0259tn: "').concat(e," ").concat(p,'"\n        '),v="".concat("https://uzynykxtaeqgkkvoefta.supabase.co","/functions/v1/gemini-proxy"),j={contents:[{parts:[{text:f},...y]}]};try{const t=await fetch(v,{method:"POST",headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV6eW55a3h0YWVxZ2trdm9lZnRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMTQ2OTYsImV4cCI6MjA3MTc5MDY5Nn0.sRdl8J8VxXa9BQMj6OtmOnHqqi5cq3kQmAgTfvbU2NM"),"Content-Type":"application/json"},body:JSON.stringify(j)});if(!t.ok){var N;const e=await t.json(),a=(null===e||void 0===e||null===(N=e.error)||void 0===N?void 0:N.message)||t.statusText;throw new Error("API sor\u011fusu u\u011fursuz oldu: ".concat(a))}const r=await t.json();if(!r.candidates||0===r.candidates.length)throw new Error("AI modelind\u0259n cavab al\u0131nmad\u0131.");let l=r.candidates[0].content.parts[0].text;l=l.replace(/```json/g,"").replace(/```/g,"").trim();const i=JSON.parse(l).map(e=>(0,s.A)((0,s.A)({},e),{},{id:Date.now()+Math.random()}));B([...a.questions,...i]),b("".concat(i.length," sual AI t\u0259r\u0259find\u0259n u\u011furla yarad\u0131ld\u0131!")),q(e+p),I(n.filter(e=>e.type.startsWith("image/")||"application/pdf"===e.type))}catch(w){throw console.error("AI Generation Error:",w),new Error(w.message||"Nam\u0259lum \u015f\u0259b\u0259k\u0259 x\u0259tas\u0131.")}},showToast:b}),(0,g.jsx)("div",{className:"animate-fade-in",children:(0,g.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[(0,g.jsxs)("div",{className:"lg:col-span-1 lg:sticky lg:top-24 lg:max-h-[calc(100vh-7rem)] lg:overflow-y-auto lg:pr-4 space-y-6",children:[(0,g.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,g.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Test Redaktoru"}),(0,g.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,g.jsxs)(l.A,{onClick:c,variant:"secondary",className:"w-full justify-center",children:[(0,g.jsx)(m.A6,{})," Siyah\u0131ya qay\u0131t"]}),(0,g.jsxs)(l.A,{onClick:()=>{a.title&&a.title.trim()?a.category&&a.category.trim()?n(a):b("Kateqoriya bo\u015f ola bilm\u0259z!"):b("Testin ad\u0131 bo\u015f ola bilm\u0259z!")},className:"w-full justify-center",children:[(0,g.jsx)(m.Sr,{}),"Testi yadda saxla"]})]})]}),(0,g.jsxs)(i.A,{children:[(0,g.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,g.jsx)(m.AQ,{})," \u018fsas M\u0259lumatlar"]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Testin ad\u0131"}),(0,g.jsx)("input",{type:"text",name:"title",value:a.title||"",onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kateqoriya"}),(0,g.jsx)(o.A,{options:f,value:a.category||"",onChange:e=>{w((0,s.A)((0,s.A)({},a),{},{category:e}))},placeholder:"Kateqoriyan\u0131 se\xe7in v\u0259 ya yaz\u0131n..."})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\u0259svir"}),(0,g.jsx)("textarea",{name:"description",value:a.description||"",onChange:T,rows:"4",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]})]}),(0,g.jsxs)(i.A,{children:[(0,g.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,g.jsx)(m.oo,{})," Parametrl\u0259r"]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test \xfc\xe7\xfcn vaxt (d\u0259qiq\u0259)"}),(0,g.jsx)("input",{type:"number",name:"timeLimit",value:a.timeLimit||10,onChange:T,min:"1",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,g.jsxs)("div",{className:"space-y-3 pt-2 border-t",children:[(0,g.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",name:"shuffleQuestions",checked:!!a.shuffleQuestions,onChange:T,className:"h-4 w-4 text-orange-600 rounded border-gray-300"})," ",(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Suallar\u0131 qar\u0131\u015fd\u0131r"})]}),(0,g.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",name:"shuffleOptions",checked:!!a.shuffleOptions,onChange:T,className:"h-4 w-4 text-orange-600 rounded border-gray-300"})," ",(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Variantlar\u0131 qar\u0131\u015fd\u0131r"})]}),(0,g.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",name:"display_all_questions",checked:!!a.display_all_questions,onChange:T,className:"h-4 w-4 text-orange-600 rounded border-gray-300"})," ",(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"B\xfct\xfcn suallar\u0131 bir s\u0259hif\u0259d\u0259 g\xf6st\u0259r"})]}),(0,g.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",name:"allow_back_navigation",checked:!0===a.allow_back_navigation,onChange:T,className:"h-4 w-4 text-orange-600 rounded border-gray-300"})," ",(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Geri qay\u0131tma\u011fa icaz\u0259 ver"})]}),(0,g.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,g.jsx)("input",{type:"checkbox",name:"is_published",checked:!!a.is_published,onChange:T,className:"h-4 w-4 text-orange-600 rounded border-gray-300"})," ",(0,g.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"D\u0259rc et (istifad\u0259\xe7il\u0259r \xfc\xe7\xfcn g\xf6r\xfcn\u0259n)"})]})]})]})]}),(0,g.jsxs)(i.A,{children:[(0,g.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,g.jsx)(m.O4,{})," Qabaqc\u0131l T\u0259nziml\u0259m\u0259l\u0259r"]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ba\u015flama vaxt\u0131 (K\xf6n\xfcll\xfc)"}),(0,g.jsx)("input",{type:"datetime-local",name:"start_time",value:D(a.start_time),onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bitm\u0259 vaxt\u0131 (K\xf6n\xfcll\xfc)"}),(0,g.jsx)("input",{type:"datetime-local",name:"end_time",value:D(a.end_time),onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"C\u0259hd limiti (0 = limitsiz)"}),(0,g.jsx)("input",{type:"number",name:"attempt_limit",value:a.attempt_limit||0,onChange:T,min:"0",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giri\u015f Kodu (K\xf6n\xfcll\xfc)"}),(0,g.jsx)("input",{type:"text",name:"passcode",value:a.passcode||"",onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Test \xfc\xe7\xfcn parol t\u0259yin et"})]})]})]})]}),(0,g.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,g.jsxs)(i.A,{children:[(0,g.jsxs)("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-4",children:[(0,g.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Suallar (",a.questions.length,")"]}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,g.jsx)(l.A,{onClick:()=>{if(!window.confirm("M\xf6vcud suallar silin\u0259c\u0259k v\u0259 9-cu sinif \u015fablonu t\u0259tbiq edil\u0259c\u0259k. Davam etm\u0259k ist\u0259yirsiniz?"))return;const e=[...Array.from({length:3},(e,a)=>M("single","Sual ".concat(a+1," (Listening)"))),M("trueFalse","Sual 4 (Listening - True/False)"),...Array.from({length:3},(e,a)=>M("single","Sual ".concat(a+5," (Reading)"))),...Array.from({length:5},(e,a)=>M("single","Sual ".concat(a+8," (Reading)"))),...Array.from({length:13},(e,a)=>M("single","Sual ".concat(a+13," (Grammar)"))),M("open","Sual 26 (Writing)",10)];B(e)},variant:"secondary",children:"9-cu Sinif \u015eablonu"}),(0,g.jsx)(l.A,{onClick:()=>{if(!window.confirm("M\xf6vcud suallar silin\u0259c\u0259k v\u0259 11-ci sinif \u015fablonu t\u0259tbiq edil\u0259c\u0259k. Davam etm\u0259k ist\u0259yirsiniz?"))return;const e=[...Array.from({length:3},(e,a)=>M("single","Sual ".concat(a+1," (Listening)"))),...Array.from({length:19},(e,a)=>M("single","Sual ".concat(a+4," (Grammar)"))),...Array.from({length:4},(e,a)=>M("single","Sual ".concat(a+23," (Reading)"))),...Array.from({length:4},(e,a)=>M("open","Sual ".concat(a+27," (Reading - Open)")))];B(e)},variant:"secondary",children:"11-ci Sinif \u015eablonu"}),(0,g.jsxs)(l.A,{onClick:()=>{b("Word s\u0259n\u0259di haz\u0131rlan\u0131r...");try{const e=(e=>{const a=(e,a)=>{const n=String.fromCharCode(65+a);return new x.fzL({children:[new x.NTc({text:"\t".concat(n,") ")}),new x.NTc(e.toString())],indent:{left:400}})},n=[new x.fzL({children:[new x.NTc("Name:_________________________"),new x.NTc({text:"\tDate:____________________",break:0})],tabStops:[{type:x.QVs.RIGHT,position:x.BF6.MAX}],spacing:{after:400}}),new x.fzL({text:e.title,heading:x.Fmo.HEADING_1,alignment:x.Yus.CENTER}),new x.fzL({text:e.description||""}),new x.fzL({text:""})];return e.questions.forEach((e,t)=>{if("fillInTheBlanks"===e.type){const a=e.text.replace(/\[.*?\]/g,"[_________________]");n.push(new x.fzL({children:[new x.NTc({text:"".concat(t+1,". "),bold:!0}),new x.NTc(a)],spacing:{before:200}}))}else n.push(new x.fzL({children:[new x.NTc({text:"".concat(t+1,". "),bold:!0}),new x.NTc(e.text)],spacing:{before:200}}));switch(e.type){case"single":case"multiple":e.options.forEach((e,t)=>{n.push(a(e,t))});break;case"trueFalse":n.push(a("Do\u011fru",0)),n.push(a("Yanl\u0131\u015f",1));break;case"textInput":case"open":n.push(new x.fzL({text:"\n\n\n"}));break;case"ordering":[...e.orderItems].sort(()=>Math.random()-.5).forEach(e=>{n.push(new x.fzL({text:"\t- ".concat(e)}))}),n.push(new x.fzL({text:"\n\n"}))}}),new x.yoT({styles:{default:{document:{run:{font:"Times New Roman",size:24}}},heading1:{run:{font:"Times New Roman",size:32,bold:!0}}},sections:[{children:n}]})})(a);x.ND6.toBlob(e).then(e=>{(0,h.saveAs)(e,"".concat(a.title.replace(/ /g,"_"),".docx"))})}catch(e){b("S\u0259n\u0259d yarad\u0131lark\u0259n x\u0259ta ba\u015f verdi: ".concat(e.message),"error"),console.error(e)}},variant:"secondary",children:[(0,g.jsx)(m.s3,{})," Word"]}),(0,g.jsxs)(l.A,{onClick:N,variant:"secondary",children:[(0,g.jsx)(m.$n,{}),"Bankdan"]}),(0,g.jsxs)(l.A,{onClick:j,variant:"secondary",children:[(0,g.jsx)(m.JM,{}),"CSV-d\u0259n"]}),(0,g.jsxs)(l.A,{onClick:()=>A(a.questions),variant:"secondary",children:[(0,g.jsx)(m.LP,{}),"Ham\u0131s\u0131n\u0131 Banka G\xf6nd\u0259r"]}),(0,g.jsxs)(l.A,{onClick:()=>S(!0),variant:"primary",children:[(0,g.jsx)(m.BZ,{}),"AI il\u0259 Yarat"]}),(0,g.jsxs)(l.A,{onClick:()=>{const e={id:Date.now(),text:"",type:"single",options:["",""],correctAnswers:[],correctAnswer:!0,orderItems:["",""],imageUrl:"",audioUrl:"",explanation:"",points:1};B([...a.questions,e])},children:[(0,g.jsx)(m.c1,{}),"Yeni Sual"]})]})]}),(0,g.jsx)("div",{className:"space-y-4",children:a.questions.map((e,n)=>(0,g.jsx)(d.A,{question:e,index:n,onUpdate:O,onDelete:()=>{return n=e.id,void B(a.questions.filter(e=>e.id!==n));var n},onDuplicate:()=>(e=>{const n=a.questions.find(a=>a.id===e);if(!n)return;const t=(0,s.A)((0,s.A)({},n),{},{id:Date.now()+Math.random()}),r=a.questions.findIndex(a=>a.id===e),l=[...a.questions];l.splice(r+1,0,t),B(l)})(e.id),onSaveToBank:()=>k(e),onGenerateVariation:()=>(async e=>{b("B\u0259nz\u0259r sual yarad\u0131l\u0131r...");const{id:n}=e,r=(0,t.A)(e,p);let l;if(_||z.length>0)l='\n                M\u0259n\u0259 veril\u0259n m\u0259tn\u0259 v\u0259/v\u0259 ya fayllara \u0259saslanaraq, a\u015fa\u011f\u0131dak\u0131 n\xfcmun\u0259y\u0259 b\u0259nz\u0259r YEN\u0130 bir sual yarat.\n                M\u0259nb\u0259 M\u0259tn: "'.concat(_,'"\n            ');else{let e="Sual\u0131n m\u0259tni: ".concat(r.text,"\n");switch(r.type){case"single":case"multiple":if(r.options&&r.options.length>0){e+="Variantlar: ".concat(r.options.join(", "),"\n");const a=(r.correctAnswers||[]).map(e=>r.options[e]);e+="D\xfczg\xfcn cavab(lar): ".concat(a.join(", "),"\n")}break;case"textInput":case"fillInTheBlanks":e+="D\xfczg\xfcn cavab(lar): ".concat((r.correctAnswers||[]).join(", "),"\n");break;case"trueFalse":e+="D\xfczg\xfcn cavab: ".concat(r.correctAnswer,"\n");break;case"ordering":e+="D\xfczg\xfcn s\u0131ralama: ".concat((r.orderItems||[]).join(" -> "),"\n")}r.explanation&&(e+="\u0130zah: ".concat(r.explanation,"\n")),l="\n                A\u015fa\u011f\u0131dak\u0131 sual\u0131n \xf6z m\u0259zmununa (m\u0259tn, variantlar, izah) \u0259saslanaraq, ona b\u0259nz\u0259r YEN\u0130 bir sual yarat.\n                M\u0259lumat m\u0259nb\u0259yi kimi a\u015fa\u011f\u0131dak\u0131 sual\u0131n detallar\u0131n\u0131 istifad\u0259 et.\n                M\u0259lumat M\u0259nb\u0259yi (Sual\u0131n \xf6z\xfc):\n".concat(e,"\n            ")}l+='\n\n            Qaydalar:\n            1. N\u0259tic\u0259ni m\xfctl\u0259q v\u0259 yaln\u0131z bir elementd\u0259n ibar\u0259t valid JSON array format\u0131nda qaytar.\n            2. Yeni sual n\xfcmun\u0259 il\u0259 eyni m\xf6vzuda, stild\u0259 v\u0259 \xe7\u0259tinlikd\u0259 olmal\u0131d\u0131r, lakin onu t\u0259krarlamamal\u0131d\u0131r.\n            3. N\xfcmun\u0259d\u0259ki b\xfct\xfcn sah\u0259l\u0259ri (type, points, tags, imageUrl v\u0259 s.) n\u0259z\u0259r\u0259 al.\n            4. \u018fg\u0259r n\xfcmun\u0259d\u0259 "imageUrl" varsa, yeni sual \xfc\xe7\xfcn d\u0259 uy\u011fun, YEN\u0130 bir \u015f\u0259kil tapma\u011fa \xe7al\u0131\u015f.\n\n            JSON Strukturu (n\xfcmun\u0259 il\u0259 eyni olmal\u0131d\u0131r): '.concat(JSON.stringify(r),"\n\n            Sual \xfc\xe7\xfcn n\xfcmun\u0259:\n            ").concat(JSON.stringify(r),"\n        ");const i=[];for(const a of z){const e=await new Promise((e,n)=>{const t=new FileReader;t.readAsDataURL(a),t.onload=()=>e(t.result.split(",")[1]),t.onerror=e=>n(e)});i.push({inline_data:{mime_type:a.type,data:e}})}const o="".concat("https://uzynykxtaeqgkkvoefta.supabase.co","/functions/v1/gemini-proxy"),c={contents:[{parts:[{text:l},...i]}]};try{const n=await fetch(o,{method:"POST",headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV6eW55a3h0YWVxZ2trdm9lZnRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMTQ2OTYsImV4cCI6MjA3MTc5MDY5Nn0.sRdl8J8VxXa9BQMj6OtmOnHqqi5cq3kQmAgTfvbU2NM"),"Content-Type":"application/json"},body:JSON.stringify(c)});if(!n.ok){var d;const e=await n.json();throw new Error((null===e||void 0===e||null===(d=e.error)||void 0===d?void 0:d.message)||n.statusText)}let t=(await n.json()).candidates[0].content.parts[0].text;t=t.replace(/```json/g,"").replace(/```/g,"").trim();const r=JSON.parse(t);if(!(r&&r.length>0))throw new Error("AI modelind\u0259n d\xfczg\xfcn formatda cavab al\u0131nmad\u0131.");{const n=(0,s.A)((0,s.A)({},r[0]),{},{id:Date.now()+Math.random()}),t=a.questions.findIndex(a=>a.id===e.id),l=[...a.questions];l.splice(t+1,0,n),B(l),b("B\u0259nz\u0259r sual u\u011furla yarad\u0131ld\u0131 v\u0259 \u0259lav\u0259 edildi!")}}catch(m){console.error("AI Variation Generation Error:",m),b("B\u0259nz\u0259r sual yarad\u0131lark\u0259n x\u0259ta ba\u015f verdi: ".concat(m.message))}})(e),uniqueTags:v},e.id))}),0===a.questions.length&&(0,g.jsx)("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:(0,g.jsx)("p",{className:"text-gray-500",children:"H\u0259l\u0259 he\xe7 bir sual \u0259lav\u0259 edilm\u0259yib. Yuxar\u0131dak\u0131 d\xfcym\u0259l\u0259rd\u0259n istifad\u0259 ed\u0259r\u0259k sual \u0259lav\u0259 edin."})})]})})]})})]}):(0,g.jsx)("div",{children:"Y\xfckl\u0259nir..."})}},8132:(e,a,n)=>{n.d(a,{A:()=>s});n(5043);var t=n(579);const s=e=>{let{children:a,className:n=""}=e;return(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(n),children:a})}}}]);
//# sourceMappingURL=863.a5170d4e.chunk.js.map