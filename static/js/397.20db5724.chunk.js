"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[397],{8132:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);var a=s(579);const l=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(s),children:t})}},9397:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(5043),l=s(3216),r=s(5475),n=s(8132),i=s(4450),c=s(3918),d=s(7304),x=s(6058),m=s(579);d.t1.register(d.PP,d.kc,d.FN,d.No,d.hE,d.m_,d.s$);const o=e=>{if(!e)return"N/A";const t=new Date(e);return isNaN(t)?"Invalid Date":t.toLocaleString("az-AZ")},h=e=>{let{results:t,onReviewResult:s}=e;return(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,m.jsx)("thead",{className:"bg-gray-50",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Ad\u0131"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N\u0259tic\u0259"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarix"})]})}),(0,m.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,m.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,m.jsx)("button",{onClick:()=>s(e),className:"text-blue-600 hover:underline text-left",children:e.quizTitle})}),(0,m.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsxs)("span",{className:"font-bold",children:[e.score," / ",e.totalPoints," bal (",e.percentage,"%)"]}),(0,m.jsxs)("span",{className:"text-xs text-gray-400",children:["(",e.correctAnswersCount,"/",e.totalQuestions," d\xfczg\xfcn)"]})]})}),(0,m.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:(0,m.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending_review"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:["pending_review"===e.status?(0,m.jsx)(c.O4,{className:"w-4 h-4 mr-1.5"}):(0,m.jsx)(c.C1,{className:"w-4 h-4 mr-1.5"}),"pending_review"===e.status?"Yoxlan\u0131l\u0131r":"Tamamlan\u0131b"]})}),(0,m.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:o(e.created_at)})]},e.id))})]})})},g=e=>{let{results:t,onReviewResult:s}=e;const{userId:d}=(0,l.g)(),g=(0,a.useMemo)(()=>t.filter(e=>e.user_id===d).sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),[t,d]),u=(0,a.useMemo)(()=>g.filter(e=>"pending_review"===e.status),[g]),p=(0,a.useMemo)(()=>g.filter(e=>"pending_review"!==e.status),[g]),j=g.length>0?"".concat(g[0].userName," ").concat(g[0].userSurname):"",N=(0,a.useMemo)(()=>{if(0===p.length)return null;return{averageScore:p.reduce((e,t)=>e+t.percentage,0)/p.length,bestPerf:[...p].sort((e,t)=>t.percentage-e.percentage)[0],worstPerf:[...p].sort((e,t)=>e.percentage-t.percentage)[0],quizAverages:p.map(e=>{const s=t.filter(t=>t.quizId===e.quizId&&"pending_review"!==t.status);if(0===s.length)return 0;return s.reduce((e,t)=>e+t.percentage,0)/s.length})}},[p,t]),f=(0,a.useMemo)(()=>{if(!N)return null;const e=[...p].sort((e,t)=>new Date(e.created_at)-new Date(t.created_at));return{labels:e.map(e=>"".concat(e.quizTitle," (").concat(o(e.created_at),")")),datasets:[{label:"T\u0259l\u0259b\u0259nin N\u0259tic\u0259si (%)",data:e.map(e=>e.percentage),borderColor:"#F97316",backgroundColor:"rgba(249, 115, 22, 0.2)",fill:!0,tension:.2},{label:"Testin Orta N\u0259tic\u0259si (%)",data:N.quizAverages,borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.2)",fill:!0,tension:.2}]}},[p,N]);return 0===g.length?(0,m.jsxs)(n.A,{className:"text-center",children:[(0,m.jsx)("p",{className:"text-red-500",children:"Bu t\u0259l\u0259b\u0259 \xfc\xe7\xfcn n\u0259tic\u0259 tap\u0131lmad\u0131."}),(0,m.jsx)(r.N_,{to:"/stats",children:(0,m.jsx)(i.A,{variant:"secondary",className:"mt-4",children:"Statistikaya qay\u0131t"})})]}):(0,m.jsxs)("div",{className:"animate-fade-in space-y-6",children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"T\u0259l\u0259b\u0259 Hesabat\u0131"}),(0,m.jsx)("p",{className:"text-lg text-gray-600",children:j})]}),(0,m.jsx)(r.N_,{to:"/stats",children:(0,m.jsxs)(i.A,{variant:"secondary",children:[(0,m.jsx)(c.A6,{})," ",(0,m.jsx)("span",{className:"hidden sm:inline",children:"Statistikaya qay\u0131t"})]})})]}),N?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,m.jsxs)(n.A,{className:"flex flex-col justify-center items-center text-center",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Orta N\u0259tic\u0259"}),(0,m.jsxs)("p",{className:"text-4xl font-bold text-orange-500",children:[N.averageScore.toFixed(1),"%"]}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["(",p.length," test \u0259sas\u0131nda)"]})]}),(0,m.jsxs)(n.A,{className:"text-center",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"\u018fn Yax\u015f\u0131 N\u0259tic\u0259"}),(0,m.jsxs)("div",{className:"flex items-center justify-center gap-2 text-2xl font-bold text-green-600",children:[(0,m.jsx)(c.Kp,{}),(0,m.jsxs)("span",{children:[N.bestPerf.percentage,"%"]})]}),(0,m.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["(",N.bestPerf.quizTitle,")"]})]}),(0,m.jsxs)(n.A,{className:"text-center",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"\u018fn Z\u0259if N\u0259tic\u0259"}),(0,m.jsxs)("div",{className:"flex items-center justify-center gap-2 text-2xl font-bold text-red-600",children:[(0,m.jsx)(c.ZL,{}),(0,m.jsxs)("span",{children:[N.worstPerf.percentage,"%"]})]}),(0,m.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["(",N.worstPerf.quizTitle,")"]})]})]}),(0,m.jsxs)(n.A,{children:[(0,m.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\u0130nki\u015faf Dinamikas\u0131 (Tamamlanm\u0131\u015f Testl\u0259r)"}),(0,m.jsx)("div",{className:"h-80",children:f&&(0,m.jsx)(x.N1,{data:f,options:{responsive:!0,maintainAspectRatio:!1}})})]})]}):(0,m.jsx)(n.A,{children:(0,m.jsxs)("div",{className:"flex items-center text-blue-700 p-4 bg-blue-50 rounded-lg",children:[(0,m.jsx)(c.KS,{className:"w-6 h-6 mr-3 flex-shrink-0"}),(0,m.jsx)("p",{children:"T\u0259l\u0259b\u0259nin tamamlanm\u0131\u015f testi olmad\u0131\u011f\u0131 \xfc\xe7\xfcn \xfcmumi analitika g\xf6st\u0259ril\u0259 bilmir. Yoxlamada olan testl\u0259r tamamland\u0131qdan sonra statistika burada g\xf6r\xfcn\u0259c\u0259k."})]})}),(0,m.jsx)(n.A,{children:(0,m.jsxs)("div",{className:"space-y-8",children:[u.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:["G\xf6zl\u0259y\u0259n Yoxlamalar (",u.length,")"]}),(0,m.jsx)(h,{results:u,onReviewResult:s})]}),p.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:["Tamamlanm\u0131\u015f N\u0259tic\u0259l\u0259r (",p.length,")"]}),(0,m.jsx)(h,{results:p,onReviewResult:s})]})]})})]})}}}]);
//# sourceMappingURL=397.20db5724.chunk.js.map