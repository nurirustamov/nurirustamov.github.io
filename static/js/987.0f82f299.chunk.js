"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[987],{3705:(e,a,s)=>{s.d(a,{A:()=>r});var l=s(5043),t=s(579);const r=e=>{let{options:a,value:s,onChange:r,placeholder:n}=e;const[i,o]=(0,l.useState)(""),[c,d]=(0,l.useState)(!1),u=(0,l.useMemo)(()=>""===i?a:a.filter(e=>e.toLowerCase().includes(i.toLowerCase())),[i,a]);return(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)("input",{type:"text",value:s,onChange:e=>{o(e.target.value),r(e.target.value),c||d(!0)},onFocus:()=>d(!0),onBlur:()=>setTimeout(()=>d(!1),150),placeholder:n,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"}),c&&(0,t.jsx)("ul",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-60 overflow-auto",children:u.length>0?u.map(e=>(0,t.jsx)("li",{onMouseDown:()=>(e=>{r(e),o(""),d(!1)})(e),className:"px-3 py-2 cursor-pointer hover:bg-orange-100",children:e},e)):(0,t.jsx)("li",{className:"px-3 py-2 text-gray-500",children:"N\u0259tic\u0259 tap\u0131lmad\u0131."})})]})}},6987:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var l=s(9379),t=s(5043),r=s(3216),n=s(6839),i=s(7633),o=s(8132),c=s(4450),d=s(3705),u=s(3918),m=s(579);const x=e=>{let{article:a,onSave:s,showToast:x,existingArticleCategories:h,quizzes:g}=e;const[p,y]=(0,t.useState)(a),[b,f]=(0,t.useState)(new Set),[j,v]=(0,t.useState)("all"),N=(0,r.Zp)(),w=(0,t.useRef)(null),k=(0,t.useRef)(null);(0,t.useEffect)(()=>{y(a);const e=new Set(((null===a||void 0===a?void 0:a.article_quizzes)||[]).map(e=>e.quiz_id));f(e)},[a]);const A=e=>{const{name:a,value:s,type:t,checked:r}=e.target;y(e=>(0,l.A)((0,l.A)({},e),{},{[a]:"checkbox"===t?r:s}))},q=e=>{y(a=>(0,l.A)((0,l.A)({},a),{},{content:e}))},C=(0,t.useMemo)(()=>["all",...new Set((g||[]).map(e=>e.category||"Kateqoriyas\u0131z"))],[g]),z=(0,t.useMemo)(()=>g?"all"===j?g:g.filter(e=>(e.category||"Kateqoriyas\u0131z")===j):[],[g,j]);return p?(0,m.jsx)("div",{className:"animate-fade-in",children:(0,m.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[(0,m.jsxs)("div",{className:"lg:col-span-1 space-y-6 lg:sticky lg:top-24",children:[(0,m.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,m.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"M\u0259qal\u0259 Redaktoru"}),(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,m.jsxs)(c.A,{onClick:()=>N("/admin/articles"),variant:"secondary",className:"w-full justify-center",children:[(0,m.jsx)(u.A6,{})," Siyah\u0131ya qay\u0131t"]}),(0,m.jsxs)(c.A,{onClick:()=>{p.title&&p.title.trim()?s((0,l.A)((0,l.A)({},p),{},{selectedQuizIds:Array.from(b)})):x("M\u0259qal\u0259 ba\u015fl\u0131\u011f\u0131 bo\u015f ola bilm\u0259z.")},className:"w-full justify-center",children:[(0,m.jsx)(u.Sr,{})," Yadda saxla"]})]})]}),(0,m.jsxs)(o.A,{children:[(0,m.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,m.jsx)(u.AQ,{})," \u018fsas M\u0259lumatlar"]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ba\u015fl\u0131q"}),(0,m.jsx)("input",{type:"text",name:"title",value:p.title||"",onChange:A,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kateqoriya"}),(0,m.jsx)(d.A,{options:h,value:p.category||"",onChange:e=>{y(a=>(0,l.A)((0,l.A)({},a),{},{category:e}))},placeholder:"Kateqoriya se\xe7in..."})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giri\u015f Kodu (K\xf6n\xfcll\xfc)"}),(0,m.jsx)("input",{type:"text",name:"passcode",value:p.passcode||"",onChange:A,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"M\u0259qal\u0259 \xfc\xe7\xfcn parol t\u0259yin et"})]}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,m.jsx)("input",{type:"checkbox",name:"is_published",checked:!!p.is_published,onChange:A,className:"h-4 w-4 text-orange-600 rounded border-gray-300"}),(0,m.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"D\u0259rc edilsin"})]})})]})]}),(0,m.jsxs)(o.A,{children:[(0,m.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,m.jsx)(u.oo,{})," \u018flaq\u0259li Testl\u0259r"]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"quiz-category-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Testl\u0259ri kateqoriya \xfczr\u0259 filtr edin"}),(0,m.jsx)("select",{id:"quiz-category-filter",value:j,onChange:e=>v(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-white focus:ring-orange-500 focus:border-orange-500",children:C.map(e=>(0,m.jsx)("option",{value:e,children:"all"===e?"B\xfct\xfcn Testl\u0259r":e},e))})]}),(0,m.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-2",children:z.length>0?z.map(e=>(0,m.jsx)("div",{children:(0,m.jsxs)("label",{className:"flex items-center cursor-pointer p-2 rounded-md hover:bg-gray-100",children:[(0,m.jsx)("input",{type:"checkbox",checked:b.has(e.id),onChange:()=>(e=>{const a=new Set(b);a.has(e)?a.delete(e):a.add(e),f(a)})(e.id),className:"h-4 w-4 text-orange-600 rounded border-gray-300"}),(0,m.jsx)("span",{className:"ml-3 text-sm text-gray-800",children:e.title})]})},e.id)):(0,m.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"Bu kateqoriyada test yoxdur."})})]})]}),(0,m.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,m.jsxs)(o.A,{children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,m.jsx)("h3",{className:"font-bold text-gray-800",children:"M\u0259qal\u0259 M\u0259zmunu"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"file",ref:w,onChange:e=>{const a=e.target.files[0];if(!a)return;x("Word s\u0259n\u0259di \xe7evrilir...");const s=new FileReader;s.onload=e=>{const a=e.target.result;i.convertToHtml({arrayBuffer:a}).then(e=>{k.current&&(k.current.setContent(e.value),q(e.value)),x("M\u0259qal\u0259 u\u011furla idxal edildi!","success")}).catch(e=>{console.error("Docx to HTML conversion error:",e),x("Word s\u0259n\u0259dini \xe7evir\u0259rk\u0259n x\u0259ta ba\u015f verdi.","error")})},s.onerror=e=>{console.error("File reading error:",e),x("S\u0259n\u0259di oxuyark\u0259n x\u0259ta ba\u015f verdi.","error")},s.readAsArrayBuffer(a),e.target.value=null},accept:".docx",className:"hidden"}),(0,m.jsxs)(c.A,{onClick:()=>{w.current.click()},variant:"secondary",children:[(0,m.jsx)(u.JM,{})," Word-d\u0259n idxal et"]})]})]}),(0,m.jsx)(n.K,{apiKey:"ocpsuuiv9mu6iw0y1u66hwuexghbh8jfdb2tmom17zk5nqo5",onInit:(e,a)=>k.current=a,value:p.content||"",onEditorChange:q,init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"}})]})})]})}):(0,m.jsx)("div",{children:"Y\xfckl\u0259nir..."})}},8132:(e,a,s)=>{s.d(a,{A:()=>t});s(5043);var l=s(579);const t=e=>{let{children:a,className:s=""}=e;return(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(s),children:a})}}}]);
//# sourceMappingURL=987.0f82f299.chunk.js.map