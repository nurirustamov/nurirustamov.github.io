"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[348],{8132:(e,t,s)=>{s.d(t,{A:()=>r});s(5043);var a=s(579);const r=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(s),children:t})}},8348:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(5043),r=s(8132),l=s(4450),n=s(3918),i=s(7001),c=s(579);const d=e=>{let{lastResult:t,onBack:s,onReview:d,onReviewPractice:o}=e;const{score:x,totalPoints:m,correctAnswersCount:u,totalQuestions:h,userName:f,userSurname:j,id:y,quizId:g,status:N}=t,[p,w]=(0,a.useState)({rank:0,totalParticipants:0,isLoading:!0}),v=m>0?Math.round(x/m*100):0;(0,a.useEffect)(()=>{if("pending_review"===N||!g)return void w({rank:0,totalParticipants:0,isLoading:!1});(async()=>{const{data:e,error:t}=await i.N.from("quiz_results").select("id, score, created_at").eq("quizId",g).eq("status","completed");if(t)return console.error("Error fetching quiz leaderboard:",t),void w({rank:0,totalParticipants:0,isLoading:!1});const s=e.sort((e,t)=>t.score-e.score||new Date(e.created_at)-new Date(t.created_at)),a=s.findIndex(e=>e.id===y)+1;w({rank:a,totalParticipants:s.length,isLoading:!1})})()},[g,y,N]);let b="",k="text-gray-800";"pending_review"===N?(b="Testd\u0259 a\xe7\u0131q suallar oldu\u011fu \xfc\xe7\xfcn n\u0259tic\u0259niz m\xfc\u0259llim t\u0259r\u0259find\u0259n yoxlan\u0131ld\u0131qdan sonra g\xf6st\u0259ril\u0259c\u0259k.",k="text-blue-600"):100===v?(b="\u018fla! B\xfct\xfcn suallara d\xfczg\xfcn cavab verdiniz!",k="text-green-600"):v>=75?(b="Yax\u015f\u0131 i\u015fdir! Siz \u0259la bacard\u0131n\u0131z.",k="text-blue-600"):v>=50?(b="Pis deyil, amma daha yax\u015f\u0131 ola bil\u0259r.",k="text-yellow-600"):(b="Yenid\u0259n c\u0259hd etm\u0259y\u0259 d\u0259y\u0259r.",k="text-red-600");const z=2*Math.PI*70,q=z-v/100*z;return(0,c.jsx)("div",{className:"animate-fade-in text-center",children:(0,c.jsxs)(r.A,{className:"p-4 sm:p-8",children:[(0,c.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Testin N\u0259tic\u0259l\u0259ri"}),f&&(0,c.jsxs)("p",{className:"text-lg text-gray-600 mt-2",children:["N\u0259tic\u0259l\u0259r: ",f," ",j]}),"pending_review"!==N?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"my-6 sm:my-8 relative inline-flex items-center justify-center",children:[(0,c.jsxs)("svg",{className:"w-48 h-48",viewBox:"0 0 180 180",children:[(0,c.jsx)("circle",{className:"text-gray-200",strokeWidth:"14",stroke:"currentColor",fill:"transparent",r:"70",cx:"90",cy:"90"}),(0,c.jsx)("circle",{className:"text-orange-500",strokeWidth:"14",stroke:"currentColor",fill:"transparent",r:"70",cx:"90",cy:"90",strokeLinecap:"round",style:{strokeDasharray:z,strokeDashoffset:q,transition:"stroke-dashoffset 0.8s ease-out"},transform:"rotate(-90 90 90)"})]}),(0,c.jsxs)("div",{className:"absolute flex flex-col items-center justify-center w-full",children:[(0,c.jsxs)("span",{className:"text-4xl sm:text-5xl font-bold text-orange-500",children:[v,"%"]}),(0,c.jsxs)("span",{className:"text-lg text-gray-600 mt-1",children:[x," / ",m," bal"]}),(0,c.jsxs)("span",{className:"text-sm text-gray-500 mt-1",children:["(",u," / ",h," d\xfczg\xfcn)"]})]})]}),p.isLoading?(0,c.jsx)("div",{className:"h-10 flex items-center justify-center mb-8",children:(0,c.jsx)("p",{className:"text-gray-500",children:"Reytinq hesablan\u0131r..."})}):p.rank>0&&p.totalParticipants>0&&(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsxs)("div",{className:"inline-flex items-center bg-yellow-100 text-yellow-800 font-semibold px-4 py-2 rounded-full",children:[(0,c.jsx)(n.OR,{className:"w-6 h-6 mr-2"}),(0,c.jsxs)("span",{children:["Sizin bu test \xfczr\u0259 reytinqiniz: ",p.totalParticipants," i\u015ftirak\xe7\u0131 aras\u0131nda ",(0,c.jsxs)("strong",{children:[p.rank,"-ci yer"]})]})]})})]}):(0,c.jsx)("div",{className:"my-12",children:(0,c.jsx)("div",{className:"inline-flex items-center justify-center bg-blue-100 text-blue-800 rounded-full w-24 h-24",children:(0,c.jsx)(n.O4,{className:"w-12 h-12"})})}),(0,c.jsx)("p",{className:"text-lg sm:text-xl font-semibold ".concat(k," mb-8"),children:b}),(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mt-6",children:[(0,c.jsxs)(l.A,{onClick:s,variant:"secondary",className:"w-full sm:w-auto",children:[(0,c.jsx)(n.A6,{}),"Siyah\u0131ya qay\u0131t"]}),(0,c.jsxs)(l.A,{onClick:d,className:"w-full sm:w-auto",children:[(0,c.jsx)(n.bM,{}),"Cavablara bax"]}),"pending_review"!==N&&v<100&&(0,c.jsxs)(l.A,{onClick:()=>o(t),variant:"primary",className:"w-full sm:w-auto",children:[(0,c.jsx)(n.fN,{}),"S\u0259hvl\u0259r \xfcz\u0259rind\u0259 i\u015fl\u0259"]})]})]})})}}}]);
//# sourceMappingURL=348.51de3546.chunk.js.map