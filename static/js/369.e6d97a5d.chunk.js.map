{"version":3,"file":"static/js/369.e6d97a5d.chunk.js","mappings":"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","sources":["pages/PastQuizReviewPage.js","components/ui/Card.js","components/Comments.js"],"sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Card from '../components/ui/Card';\r\nimport Button from '../components/ui/Button';\r\nimport { ArrowLeftIcon, CheckCircleIcon, XCircleIcon, ClockIcon, LightbulbIcon } from '../assets/icons';\r\nimport Comments from '../components/Comments';\r\n\r\nconst formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    const date = new Date(dateString);\r\n    if (isNaN(date)) return 'Invalid Date';\r\n    return date.toLocaleString('az-AZ', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });\r\n};\r\n\r\nconst PastQuizReviewPage = ({ result, quiz, profile, fetchComments, postComment, deleteComment }) => {\r\n\r\n    if (!result || !quiz) {\r\n        return (\r\n            <Card className=\"text-center\">\r\n                <p className=\"text-red-500\">Nəticə və ya test məlumatı tapılmadı.</p>\r\n                <Link to=\"/stats\">\r\n                    <Button variant=\"secondary\" className=\"mt-4\">Statistikaya qayıt</Button>\r\n                </Link>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    const studentName = `${result.userName} ${result.userSurname}`;\r\n\r\n    const getQuestionStatusInfo = (question, userAnswer) => {\r\n        // For 'open' questions, the logic depends on whether it's graded\r\n        if (question.type === 'open') {\r\n            // Graded: userAnswer is an object { answer: '...', score: X }\r\n            if (typeof userAnswer === 'object' && userAnswer !== null && userAnswer.hasOwnProperty('score')) {\r\n                return {\r\n                    status: userAnswer.score > 0 ? 'correct' : 'incorrect',\r\n                    userAnswerText: userAnswer.answer || 'Cavab yoxdur',\r\n                    correctAnswerText: '', // No correct answer to show, just the score\r\n                    manualScore: userAnswer.score\r\n                };\r\n            }\r\n            // Pending review: userAnswer is a string\r\n            return {\r\n                status: 'pending',\r\n                userAnswerText: userAnswer || 'Cavab yoxdur',\r\n                correctAnswerText: 'Yoxlanılır...',\r\n                manualScore: null\r\n            };\r\n        }\r\n\r\n        // Logic for other auto-graded question types\r\n        let isCorrect = false;\r\n        let correctAnswerText = '';\r\n        let userAnswerText = '';\r\n\r\n        if (question.type === 'single') {\r\n            isCorrect = userAnswer === question.options[question.correctAnswers[0]];\r\n            correctAnswerText = question.options[question.correctAnswers[0]];\r\n            userAnswerText = userAnswer || 'Cavab yoxdur';\r\n        } else if (question.type === 'multiple') {\r\n            const correct = question.correctAnswers.map(i => question.options[i]).sort();\r\n            const user = userAnswer ? [...userAnswer].sort() : [];\r\n            isCorrect = JSON.stringify(correct) === JSON.stringify(user);\r\n            correctAnswerText = correct.join(', ');\r\n            userAnswerText = userAnswer && userAnswer.length > 0 ? userAnswer.join(', ') : 'Cavab yoxdur';\r\n        } else if (question.type === 'textInput') {\r\n            isCorrect = userAnswer && question.correctAnswers[0].trim().toLowerCase() === userAnswer.trim().toLowerCase();\r\n            correctAnswerText = question.correctAnswers[0];\r\n            userAnswerText = userAnswer || 'Cavab yoxdur';\r\n        } else if (question.type === 'trueFalse') {\r\n            isCorrect = userAnswer === question.correctAnswer;\r\n            correctAnswerText = question.correctAnswer ? 'Doğru' : 'Yanlış';\r\n            userAnswerText = userAnswer === true ? 'Doğru' : (userAnswer === false ? 'Yanlış' : 'Cavab yoxdur');\r\n        } else if (question.type === 'ordering') {\r\n            isCorrect = JSON.stringify(userAnswer) === JSON.stringify(question.orderItems);\r\n            correctAnswerText = question.orderItems.map((item, i) => `${i + 1}. ${item}`).join('; ');\r\n            userAnswerText = userAnswer && userAnswer.length > 0 ? userAnswer.map((item, i) => `${i + 1}. ${item}`).join('; ') : 'Cavab yoxdur';\r\n        }\r\n\r\n        return {\r\n            status: isCorrect ? 'correct' : 'incorrect',\r\n            userAnswerText,\r\n            correctAnswerText,\r\n            manualScore: null\r\n        };\r\n    };\r\n\r\n    const statusStyles = {\r\n        correct: { container: 'bg-green-50 border-l-4 border-green-400', icon: <CheckCircleIcon />, iconColor: 'text-green-500', textColor: 'text-green-700' },\r\n        incorrect: { container: 'bg-red-50 border-l-4 border-red-400', icon: <XCircleIcon />, iconColor: 'text-red-500', textColor: 'text-red-700' },\r\n        pending: { container: 'bg-yellow-50 border-l-4 border-yellow-400', icon: <ClockIcon />, iconColor: 'text-yellow-500', textColor: 'text-yellow-700' },\r\n    };\r\n\r\n    return (\r\n        <div className=\"animate-fade-in\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                 <h1 className=\"text-xl sm:text-2xl font-bold text-orange-600\">\r\n                    Cavabların təhlili: {quiz.title}\r\n                </h1>\r\n                <Link to={`/student/${result.user_id}`}>\r\n                    <Button variant=\"secondary\"><ArrowLeftIcon /> Tələbənin hesabatına qayıt</Button>\r\n                </Link>\r\n            </div>\r\n            <Card>\r\n                <div className=\"flex justify-between items-center mb-4 pb-4 border-b\">\r\n                    <div>\r\n                        <p><strong>Tələbə:</strong> {studentName}</p>\r\n                        <p><strong>Tarix:</strong> {formatDate(result.created_at)}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                        <p><strong>Nəticə:</strong> {result.percentage}%</p>\r\n                        <p><strong>Bal:</strong> {result.score} / {result.totalPoints}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    {result.questionOrder.map((q, index) => {\r\n                        const originalQuestion = (quiz.questions || []).find(origQ => origQ.id === q.id);\r\n                        if (!originalQuestion) return (\r\n                            <div key={q.id} className=\"p-3 sm:p-4 rounded-lg bg-gray-100 border-l-4 border-gray-400\">\r\n                                <p className=\"text-gray-600\">Bu sual testdən silinib.</p>\r\n                            </div>\r\n                        );\r\n\r\n                        const userAnswer = result.userAnswers[q.id];\r\n                        const { status, userAnswerText, correctAnswerText, manualScore } = getQuestionStatusInfo(originalQuestion, userAnswer);\r\n                        const styles = statusStyles[status];\r\n\r\n                        return (\r\n                            <div key={q.id} className={`p-3 sm:p-4 rounded-lg ${styles.container}`}>\r\n                                <div className=\"flex items-start\">\r\n                                    <span className={`mr-3 mt-1 ${styles.iconColor}`}>{styles.icon}</span>\r\n                                    <h3 className=\"font-semibold text-base sm:text-lg text-gray-800 flex-1\">{index + 1}. {originalQuestion.text}</h3>\r\n                                </div>\r\n                                \r\n                                {originalQuestion.imageUrl && (\r\n                                    <div className=\"pl-8 mt-3\"><img src={originalQuestion.imageUrl} alt=\"Question illustration\" className=\"rounded-lg max-h-40 sm:max-h-60 w-auto mx-auto\" onError={(e) => e.target.style.display = 'none'} /></div>\r\n                                )}\r\n\r\n                                <div className=\"mt-3 pl-8 space-y-2 text-sm sm:text-base\">\r\n                                    <p>\r\n                                        <strong>Tələbənin cavabı:</strong>{' '}\r\n                                        <span className={`${styles.textColor} font-medium`}>{userAnswerText}</span>\r\n                                    </p>\r\n                                    {status === 'incorrect' && (\r\n                                        <p>\r\n                                            <strong>Düzgün cavab:</strong>{' '}\r\n                                            <span className=\"text-green-700 font-medium\">{correctAnswerText}</span>\r\n                                        </p>\r\n                                    )}\r\n                                    {status === 'pending' && (\r\n                                        <p className=\"font-semibold text-yellow-800\">({correctAnswerText})</p>\r\n                                    )}\r\n                                    {manualScore !== null && (\r\n                                        <p>\r\n                                            <strong>Yoxlayan tərəfindən verilən bal:</strong>{' '}\r\n                                            <span className=\"font-bold text-blue-600\">{manualScore} / {originalQuestion.points}</span>\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {originalQuestion.explanation && (\r\n                                    <div className=\"mt-4 pt-3 pl-8 border-t border-gray-300/70\">\r\n                                        <div className=\"flex items-start text-sm text-blue-800\">\r\n                                            <span className=\"mr-2 mt-1 flex-shrink-0\"><LightbulbIcon /></span>\r\n                                            <div><strong className=\"font-semibold\">İzah:</strong><p className=\"mt-1 whitespace-pre-wrap\">{originalQuestion.explanation}</p></div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"mt-4 pt-4 pl-8 border-t border-gray-300/70\">\r\n                                    <Comments \r\n                                        targetId={originalQuestion.id.toString()} \r\n                                        targetType=\"question\"\r\n                                        profile={profile} \r\n                                        fetchComments={fetchComments} \r\n                                        postComment={postComment} \r\n                                        deleteComment={deleteComment} \r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PastQuizReviewPage;\r\n","import React from 'react';\n\nconst Card = ({ children, className = '' }) => (\n    <div className={`bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ${className}`}>{children}</div>\n);\n\nexport default Card;","import React, { useState, useMemo, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport Button from './ui/Button';\r\nimport { ReplyIcon, TrashIcon } from '../assets/icons';\r\n\r\nconst Comment = ({ comment, onReply, onDelete, profile }) => {\r\n    const [showReplyForm, setShowReplyForm] = useState(false);\r\n    const [replyContent, setReplyContent] = useState('');\r\n\r\n    const handleReplySubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!replyContent.trim()) return;\r\n        onReply(replyContent, comment.id);\r\n        setReplyContent('');\r\n        setShowReplyForm(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-2 p-3 rounded-lg bg-white shadow-sm\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-8 h-8 rounded-full bg-orange-200 flex items-center justify-center font-bold text-orange-600\">\r\n                        {comment.profiles.first_name?.[0] || 'U'}\r\n                    </div>\r\n                    <span className=\"font-semibold text-gray-800\">{comment.profiles.first_name} {comment.profiles.last_name}</span>\r\n                </div>\r\n                <span className=\"text-xs text-gray-400\">{new Date(comment.created_at).toLocaleString()}</span>\r\n            </div>\r\n            <p className=\"text-gray-700 pl-10\">{comment.content}</p>\r\n            <div className=\"flex items-center justify-end gap-2 pl-10\">\r\n                {profile && <Button variant=\"secondary\" size=\"sm\" onClick={() => setShowReplyForm(!showReplyForm)}><ReplyIcon /> Cavab ver</Button>}\r\n                {profile?.id === comment.user_id && <Button variant=\"danger\" size=\"sm\" onClick={() => onDelete(comment.id)}><TrashIcon /></Button>}\r\n            </div>\r\n            {showReplyForm && (\r\n                <form onSubmit={handleReplySubmit} className=\"pl-10 mt-2 flex gap-2\">\r\n                    <input \r\n                        type=\"text\" \r\n                        value={replyContent}\r\n                        onChange={(e) => setReplyContent(e.target.value)}\r\n                        placeholder={`Cavab verilir: ${comment.profiles.first_name}...`}\r\n                        className=\"flex-grow mt-1 block w-full rounded-md border-gray-300 shadow-sm text-sm\"\r\n                    />\r\n                    <Button type=\"submit\" size=\"sm\">Göndər</Button>\r\n                </form>\r\n            )}\r\n            {comment.children && comment.children.length > 0 && (\r\n                <div className=\"pl-6 border-l-2 border-orange-100 mt-2 space-y-3\">\r\n                    {comment.children.map(child => (\r\n                        <Comment key={child.id} comment={child} onReply={onReply} onDelete={onDelete} profile={profile} />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Comments = ({ targetId, targetType, profile, fetchComments, postComment, deleteComment }) => {\r\n    const [comments, setComments] = useState([]);\r\n    const [newComment, setNewComment] = useState('');\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        const loadComments = async () => {\r\n            const fetchedComments = await fetchComments(targetId, targetType);\r\n            setComments(fetchedComments || []);\r\n        };\r\n        if (targetId && targetType) {\r\n            loadComments();\r\n        }\r\n    }, [targetId, targetType, fetchComments]);\r\n\r\n    const handlePostComment = async (content, parentId = null) => {\r\n        const targetUrl = `${location.pathname}#comment-${parentId || 'new'}`;\r\n        const postedComment = await postComment(targetId, targetType, content, parentId, targetUrl);\r\n        if (postedComment) {\r\n            const fetchedComments = await fetchComments(targetId, targetType);\r\n            setComments(fetchedComments || []);\r\n            if (!parentId) {\r\n                setNewComment('');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDeleteComment = async (commentId) => {\r\n        const success = await deleteComment(commentId);\r\n        if (success) {\r\n            setComments(prev => prev.filter(c => c.id !== commentId));\r\n        }\r\n    };\r\n\r\n    const commentTree = useMemo(() => {\r\n        const map = {};\r\n        const roots = [];\r\n        comments.forEach(comment => {\r\n            map[comment.id] = { ...comment, children: [] };\r\n        });\r\n        comments.forEach(comment => {\r\n            if (comment.parent_comment_id && map[comment.parent_comment_id]) {\r\n                map[comment.parent_comment_id].children.push(map[comment.id]);\r\n            } else {\r\n                roots.push(map[comment.id]);\r\n            }\r\n        });\r\n        return roots;\r\n    }, [comments]);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <h3 className=\"text-xl font-bold text-gray-800\">Şərhlər ({comments.length})</h3>\r\n            {profile && (\r\n                <form onSubmit={(e) => { e.preventDefault(); handlePostComment(newComment); }} className=\"flex gap-2 items-start\">\r\n                    <textarea \r\n                        value={newComment}\r\n                        onChange={(e) => setNewComment(e.target.value)}\r\n                        placeholder=\"Şərhinizi yazın...\"\r\n                        className=\"flex-grow mt-1 block w-full rounded-md border-gray-300 shadow-sm\"\r\n                        rows=\"3\"\r\n                    />\r\n                    <Button type=\"submit\">Göndər</Button>\r\n                </form>\r\n            )}\r\n            {!profile && <p className=\"text-center p-4 bg-gray-50 rounded-md\">Şərh yazmaq üçün <Link to=\"/auth\" className=\"text-orange-600 font-semibold hover:underline\">daxil olun</Link>.</p>}\r\n            \r\n            <div className=\"space-y-4\">\r\n                {commentTree.map(comment => (\r\n                    <Comment key={comment.id} comment={comment} onReply={handlePostComment} onDelete={handleDeleteComment} profile={profile} />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Comments;\r\n"],"names":["formatDate","dateString","date","Date","isNaN","toLocaleString","day","month","year","hour","minute","_ref","result","quiz","profile","fetchComments","postComment","deleteComment","_jsxs","Card","className","children","_jsx","Link","to","Button","variant","studentName","concat","userName","userSurname","statusStyles","correct","container","icon","CheckCircleIcon","iconColor","textColor","incorrect","XCircleIcon","pending","ClockIcon","title","user_id","ArrowLeftIcon","created_at","percentage","score","totalPoints","questionOrder","map","q","index","originalQuestion","questions","find","origQ","id","userAnswer","userAnswers","status","userAnswerText","correctAnswerText","manualScore","getQuestionStatusInfo","question","type","hasOwnProperty","answer","isCorrect","options","correctAnswers","i","sort","user","JSON","stringify","join","length","trim","toLowerCase","correctAnswer","orderItems","item","styles","text","imageUrl","src","alt","onError","e","target","style","display","points","explanation","LightbulbIcon","Comments","targetId","toString","targetType","Comment","_comment$profiles$fir","comment","onReply","onDelete","showReplyForm","setShowReplyForm","useState","replyContent","setReplyContent","profiles","first_name","last_name","content","size","onClick","ReplyIcon","TrashIcon","onSubmit","preventDefault","value","onChange","placeholder","child","_ref2","comments","setComments","newComment","setNewComment","location","useLocation","useEffect","async","fetchedComments","loadComments","handlePostComment","parentId","arguments","undefined","targetUrl","pathname","handleDeleteComment","commentId","prev","filter","c","commentTree","useMemo","roots","forEach","_objectSpread","parent_comment_id","push","rows"],"sourceRoot":""}