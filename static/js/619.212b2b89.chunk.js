"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[619],{6619:(e,s,l)=>{l.r(s),l.d(s,{default:()=>x});var a=l(9379),r=l(5043),t=l(3216),n=l(8132),i=l(4450),d=l(1425),c=l(3918),m=l(579);const o=e=>{let{isOpen:s,onClose:l,allUsers:a,onAddMembers:t,existingMembers:n}=e;const[o,x]=(0,r.useState)(new Set),u=(0,r.useMemo)(()=>{const e=new Set(n.map(e=>e.user_id));return a.filter(s=>"admin"!==s.role&&!e.has(s.id))},[a,n]);return s?(0,m.jsxs)(d.A,{isOpen:s,onClose:l,title:"Qrupa t\u0259l\u0259b\u0259 \u0259lav\u0259 et",children:[(0,m.jsx)("div",{className:"max-h-72 overflow-y-auto space-y-2 pr-2",children:u.length>0?u.map(e=>(0,m.jsxs)("div",{className:"flex items-center p-2 rounded-md hover:bg-gray-100",children:[(0,m.jsx)("input",{type:"checkbox",id:"user-".concat(e.id),checked:o.has(e.id),onChange:()=>(e=>{const s=new Set(o);s.has(e)?s.delete(e):s.add(e),x(s)})(e.id),className:"h-4 w-4 text-orange-600 rounded mr-3"}),(0,m.jsxs)("label",{htmlFor:"user-".concat(e.id),className:"flex-1 cursor-pointer text-sm font-medium",children:[e.first_name," ",e.last_name," (",e.email,")"]})]},e.id)):(0,m.jsx)("p",{className:"text-center text-gray-500 py-10",children:"\u018flav\u0259 edil\u0259c\u0259k t\u0259l\u0259b\u0259 yoxdur."})}),(0,m.jsx)("div",{className:"mt-6 flex justify-end",children:(0,m.jsxs)(i.A,{onClick:()=>{t(Array.from(o)),x(new Set),l()},disabled:0===o.size,children:[(0,m.jsx)(c.c1,{})," Se\xe7ilmi\u015fl\u0259ri \u0259lav\u0259 et (",o.size,")"]})})]}):null},x=e=>{let{group:s,onDraftChange:l,allUsers:d,onSave:x,showToast:u}=e;const[h,p]=(0,r.useState)(!1),j=(0,t.Zp)(),f=e=>{const{name:s,value:r}=e.target;l(e=>(0,a.A)((0,a.A)({},e),{},{[s]:r}))};return s?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o,{isOpen:h,onClose:()=>p(!1),allUsers:d,onAddMembers:e=>{const s=d.filter(s=>e.includes(s.id)).map(e=>({user_id:e.id,profiles:{first_name:e.first_name,last_name:e.last_name,email:e.email}}));l(e=>(0,a.A)((0,a.A)({},e),{},{members:[...e.members||[],...s]}))},existingMembers:s.members||[]}),(0,m.jsxs)("div",{className:"animate-fade-in grid lg:grid-cols-3 gap-8 items-start",children:[(0,m.jsxs)("div",{className:"lg:col-span-1 space-y-6 lg:sticky lg:top-24",children:[(0,m.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,m.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:s.id?"Qrupu Redakt\u0259 Et":"Yeni Qrup Yarat"}),(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,m.jsxs)(i.A,{variant:"secondary",onClick:()=>j("/admin/groups"),className:"w-full justify-center",children:[(0,m.jsx)(c.A6,{})," Siyah\u0131ya qay\u0131t"]}),(0,m.jsxs)(i.A,{onClick:()=>{s.name.trim()?x(s):u("Qrupun ad\u0131 bo\u015f ola bilm\u0259z.")},className:"w-full justify-center",children:[(0,m.jsx)(c.Sr,{})," Yadda saxla"]})]})]}),(0,m.jsxs)(n.A,{children:[(0,m.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,m.jsx)(c.AQ,{})," Qrup M\u0259lumatlar\u0131"]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Qrupun Ad\u0131"}),(0,m.jsx)("input",{type:"text",name:"name",value:s.name||"",onChange:f,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\u0259svir"}),(0,m.jsx)("textarea",{name:"description",value:s.description||"",onChange:f,rows:"4",className:"w-full p-2 border border-gray-300 rounded-md"})]})]})]})]}),(0,m.jsx)("div",{className:"lg:col-span-2",children:(0,m.jsxs)(n.A,{children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsxs)("h3",{className:"font-bold flex items-center gap-2",children:[(0,m.jsx)(c.c2,{})," Qrup \xdczvl\u0259ri (",(s.members||[]).length,")"]}),(0,m.jsxs)(i.A,{onClick:()=>p(!0),children:[(0,m.jsx)(c.c1,{})," \xdczv \u0259lav\u0259 et"]})]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(s.members||[]).map(e=>{var s,r;return(0,m.jsxs)("div",{className:"p-3 rounded-lg flex items-center justify-between bg-white border",children:[(0,m.jsxs)("span",{className:"font-medium",children:[null===(s=e.profiles)||void 0===s?void 0:s.first_name," ",null===(r=e.profiles)||void 0===r?void 0:r.last_name]}),(0,m.jsx)(i.A,{size:"sm",variant:"danger",onClick:()=>{return s=e.user_id,void l(e=>(0,a.A)((0,a.A)({},e),{},{members:e.members.filter(e=>e.user_id!==s)}));var s},children:(0,m.jsx)(c.uc,{})})]},e.user_id)}),0===(s.members||[]).length&&(0,m.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Qrupda t\u0259l\u0259b\u0259 yoxdur."})]})]})})]})]}):(0,m.jsx)("div",{children:"Y\xfckl\u0259nir..."})}},8132:(e,s,l)=>{l.d(s,{A:()=>r});l(5043);var a=l(579);const r=e=>{let{children:s,className:l=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(l),children:s})}}}]);
//# sourceMappingURL=619.212b2b89.chunk.js.map