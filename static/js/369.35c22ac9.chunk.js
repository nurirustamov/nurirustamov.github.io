"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[369],{6369:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});s(5043);var r=s(5475),n=s(8132),a=s(4450),l=s(3918),i=s(9207),o=s(579);const c=e=>{if(!e)return"N/A";const t=new Date(e);return isNaN(t)?"Invalid Date":t.toLocaleString("az-AZ",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},d=e=>{let{result:t,quiz:s,profile:d,fetchComments:m,postComment:x,deleteComment:h}=e;if(!t||!s)return(0,o.jsxs)(n.A,{className:"text-center",children:[(0,o.jsx)("p",{className:"text-red-500",children:"N\u0259tic\u0259 v\u0259 ya test m\u0259lumat\u0131 tap\u0131lmad\u0131."}),(0,o.jsx)(r.N_,{to:"/stats",children:(0,o.jsx)(a.A,{variant:"secondary",className:"mt-4",children:"Statistikaya qay\u0131t"})})]});const p="".concat(t.userName," ").concat(t.userSurname),u={correct:{container:"bg-green-50 border-l-4 border-green-400",icon:(0,o.jsx)(l.C1,{}),iconColor:"text-green-500",textColor:"text-green-700"},incorrect:{container:"bg-red-50 border-l-4 border-red-400",icon:(0,o.jsx)(l.qh,{}),iconColor:"text-red-500",textColor:"text-red-700"},pending:{container:"bg-yellow-50 border-l-4 border-yellow-400",icon:(0,o.jsx)(l.O4,{}),iconColor:"text-yellow-500",textColor:"text-yellow-700"}};return(0,o.jsxs)("div",{className:"animate-fade-in",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsxs)("h1",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:["Cavablar\u0131n t\u0259hlili: ",s.title]}),(0,o.jsx)(r.N_,{to:"/student/".concat(t.user_id),children:(0,o.jsxs)(a.A,{variant:"secondary",children:[(0,o.jsx)(l.A6,{})," T\u0259l\u0259b\u0259nin hesabat\u0131na qay\u0131t"]})})]}),(0,o.jsxs)(n.A,{children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-4 border-b",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"T\u0259l\u0259b\u0259:"})," ",p]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Tarix:"})," ",c(t.created_at)]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"N\u0259tic\u0259:"})," ",t.percentage,"%"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Bal:"})," ",t.score," / ",t.totalPoints]})]})]}),(0,o.jsx)("div",{className:"space-y-6",children:t.questionOrder.map((e,r)=>{const n=(s.questions||[]).find(t=>t.id===e.id);if(!n)return(0,o.jsx)("div",{className:"p-3 sm:p-4 rounded-lg bg-gray-100 border-l-4 border-gray-400",children:(0,o.jsx)("p",{className:"text-gray-600",children:"Bu sual testd\u0259n silinib."})},e.id);const a=t.userAnswers[e.id],{status:c,userAnswerText:p,correctAnswerText:g,manualScore:j}=((e,t)=>{if("open"===e.type)return"object"===typeof t&&null!==t&&t.hasOwnProperty("score")?{status:t.score>0?"correct":"incorrect",userAnswerText:t.answer||"Cavab yoxdur",correctAnswerText:"",manualScore:t.score}:{status:"pending",userAnswerText:t||"Cavab yoxdur",correctAnswerText:"Yoxlan\u0131l\u0131r...",manualScore:null};let s=!1,r="",n="";if("single"===e.type)s=t===e.options[e.correctAnswers[0]],r=e.options[e.correctAnswers[0]],n=t||"Cavab yoxdur";else if("multiple"===e.type){const a=e.correctAnswers.map(t=>e.options[t]).sort(),l=t?[...t].sort():[];s=JSON.stringify(a)===JSON.stringify(l),r=a.join(", "),n=t&&t.length>0?t.join(", "):"Cavab yoxdur"}else"textInput"===e.type?(s=t&&e.correctAnswers[0].trim().toLowerCase()===t.trim().toLowerCase(),r=e.correctAnswers[0],n=t||"Cavab yoxdur"):"trueFalse"===e.type?(s=t===e.correctAnswer,r=e.correctAnswer?"Do\u011fru":"Yanl\u0131\u015f",n=!0===t?"Do\u011fru":!1===t?"Yanl\u0131\u015f":"Cavab yoxdur"):"ordering"===e.type?(s=JSON.stringify(t)===JSON.stringify(e.orderItems),r=e.orderItems.map((e,t)=>"".concat(t+1,". ").concat(e)).join("; "),n=t&&t.length>0?t.map((e,t)=>"".concat(t+1,". ").concat(e)).join("; "):"Cavab yoxdur"):"fillInTheBlanks"===e.type&&(s=Array.isArray(t)&&t.length===e.correctAnswers.length&&t.every((t,s)=>(t||"").trim().toLowerCase()===(e.correctAnswers[s]||"").trim().toLowerCase()),r=e.correctAnswers.join(", "),n=t&&t.length>0?t.join(", "):"Cavab yoxdur");return{status:s?"correct":"incorrect",userAnswerText:n,correctAnswerText:r,manualScore:null}})(n,a),f=u[c];return(0,o.jsxs)("div",{className:"p-3 sm:p-4 rounded-lg ".concat(f.container),children:[(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsx)("span",{className:"mr-3 mt-1 ".concat(f.iconColor),children:f.icon}),(0,o.jsxs)("h3",{className:"font-semibold text-base sm:text-lg text-gray-800 flex-1",children:[r+1,". ",n.text]})]}),t.time_per_question&&void 0!==t.time_per_question[e.id]&&(0,o.jsxs)("div",{className:"pl-8 mt-2 flex items-center text-xs text-gray-500",children:[(0,o.jsx)(l.O4,{className:"w-4 h-4 mr-1"}),(0,o.jsxs)("span",{children:["S\u0259rf olunan vaxt: ",Math.round(t.time_per_question[e.id])," saniy\u0259"]})]}),n.imageUrl&&(0,o.jsx)("div",{className:"pl-8 mt-3",children:(0,o.jsx)("img",{src:n.imageUrl,alt:"Question illustration",className:"rounded-lg max-h-40 sm:max-h-60 w-auto mx-auto",onError:e=>e.target.style.display="none"})}),"fillInTheBlanks"===n.type?(0,o.jsx)("div",{className:"mt-3 pl-8 text-lg leading-loose",children:n.text.split(/(\[.*?\])/g).filter(e=>e).map((e,t)=>{if(e.startsWith("[")&&e.endsWith("]")){const s=n.text.substring(0,n.text.indexOf(e)).split("[").length-1,r=(a||[])[s]||"",l=n.correctAnswers[s]||"",i=r.trim().toLowerCase()===l.trim().toLowerCase();return(0,o.jsxs)("span",{className:"inline-block font-semibold px-2 py-1 rounded-md text-sm ".concat(i?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[r||"___",!i&&(0,o.jsxs)("span",{className:"ml-2 text-xs text-green-700 font-bold",children:["(",l,")"]})]},t)}return(0,o.jsx)("span",{children:e},t)})}):(0,o.jsxs)("div",{className:"mt-3 pl-8 space-y-2 text-sm sm:text-base",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"T\u0259l\u0259b\u0259nin cavab\u0131:"})," ",(0,o.jsx)("span",{className:"".concat(f.textColor," font-medium"),children:p})]}),"incorrect"===c&&(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"D\xfczg\xfcn cavab:"})," ",(0,o.jsx)("span",{className:"text-green-700 font-medium",children:g})]}),"pending"===c&&(0,o.jsxs)("p",{className:"font-semibold text-yellow-800",children:["(",g,")"]}),null!==j&&(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Yoxlayan t\u0259r\u0259find\u0259n veril\u0259n bal:"})," ",(0,o.jsxs)("span",{className:"font-bold text-blue-600",children:[j," / ",n.points]})]})]}),n.explanation&&(0,o.jsx)("div",{className:"mt-4 pt-3 pl-8 border-t border-gray-300/70",children:(0,o.jsxs)("div",{className:"flex items-start text-sm text-blue-800",children:[(0,o.jsx)("span",{className:"mr-2 mt-1 flex-shrink-0",children:(0,o.jsx)(l.xm,{})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{className:"font-semibold",children:"\u0130zah:"}),(0,o.jsx)("p",{className:"mt-1 whitespace-pre-wrap",children:n.explanation})]})]})}),(0,o.jsx)("div",{className:"mt-4 pt-4 pl-8 border-t border-gray-300/70",children:(0,o.jsx)(i.A,{targetId:n.id.toString(),targetType:"question",profile:d,fetchComments:m,postComment:x,deleteComment:h})})]},e.id)})})]})]})}},8132:(e,t,s)=>{s.d(t,{A:()=>n});s(5043);var r=s(579);const n=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(s),children:t})}},9207:(e,t,s)=>{s.d(t,{A:()=>m});var r=s(9379),n=s(5043),a=s(3216),l=s(5475),i=s(4450),o=s(3918),c=s(579);const d=e=>{var t;let{comment:s,onReply:r,onDelete:a,profile:l}=e;const[m,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)("");return(0,c.jsxs)("div",{className:"flex flex-col gap-2 p-3 rounded-lg bg-white shadow-sm",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-full bg-orange-200 flex items-center justify-center font-bold text-orange-600",children:(null===(t=s.profiles.first_name)||void 0===t?void 0:t[0])||"U"}),(0,c.jsxs)("span",{className:"font-semibold text-gray-800",children:[s.profiles.first_name," ",s.profiles.last_name]})]}),(0,c.jsx)("span",{className:"text-xs text-gray-400",children:new Date(s.created_at).toLocaleString()})]}),(0,c.jsx)("p",{className:"text-gray-700 pl-10",children:s.content}),(0,c.jsxs)("div",{className:"flex items-center justify-end gap-2 pl-10",children:[l&&(0,c.jsxs)(i.A,{variant:"secondary",size:"sm",onClick:()=>x(!m),children:[(0,c.jsx)(o.Sb,{})," Cavab ver"]}),(null===l||void 0===l?void 0:l.id)===s.user_id&&(0,c.jsx)(i.A,{variant:"danger",size:"sm",onClick:()=>a(s.id),children:(0,c.jsx)(o.uc,{})})]}),m&&(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h.trim()&&(r(h,s.id),p(""),x(!1))},className:"pl-10 mt-2 flex gap-2",children:[(0,c.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"Cavab verilir: ".concat(s.profiles.first_name,"..."),className:"flex-grow mt-1 block w-full rounded-md border-gray-300 shadow-sm text-sm"}),(0,c.jsx)(i.A,{type:"submit",size:"sm",children:"G\xf6nd\u0259r"})]}),s.children&&s.children.length>0&&(0,c.jsx)("div",{className:"pl-6 border-l-2 border-orange-100 mt-2 space-y-3",children:s.children.map(e=>(0,c.jsx)(d,{comment:e,onReply:r,onDelete:a,profile:l},e.id))})]})},m=e=>{let{targetId:t,targetType:s,profile:o,fetchComments:m,postComment:x,deleteComment:h}=e;const[p,u]=(0,n.useState)([]),[g,j]=(0,n.useState)(""),f=(0,a.zy)();(0,n.useEffect)(()=>{t&&s&&(async()=>{const e=await m(t,s);u(e||[])})()},[t,s,m]);const y=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n="".concat(f.pathname,"#comment-").concat(r||"new");if(await x(t,s,e,r,n)){const e=await m(t,s);u(e||[]),r||j("")}},b=async e=>{await h(e)&&u(t=>t.filter(t=>t.id!==e))},v=(0,n.useMemo)(()=>{const e={},t=[];return p.forEach(t=>{e[t.id]=(0,r.A)((0,r.A)({},t),{},{children:[]})}),p.forEach(s=>{s.parent_comment_id&&e[s.parent_comment_id]?e[s.parent_comment_id].children.push(e[s.id]):t.push(e[s.id])}),t},[p]);return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["\u015e\u0259rhl\u0259r (",p.length,")"]}),o&&(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y(g)},className:"flex gap-2 items-start",children:[(0,c.jsx)("textarea",{value:g,onChange:e=>j(e.target.value),placeholder:"\u015e\u0259rhinizi yaz\u0131n...",className:"flex-grow mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:"3"}),(0,c.jsx)(i.A,{type:"submit",children:"G\xf6nd\u0259r"})]}),!o&&(0,c.jsxs)("p",{className:"text-center p-4 bg-gray-50 rounded-md",children:["\u015e\u0259rh yazmaq \xfc\xe7\xfcn ",(0,c.jsx)(l.N_,{to:"/auth",className:"text-orange-600 font-semibold hover:underline",children:"daxil olun"}),"."]}),(0,c.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,c.jsx)(d,{comment:e,onReply:y,onDelete:b,profile:o},e.id))})]})}}}]);
//# sourceMappingURL=369.35c22ac9.chunk.js.map