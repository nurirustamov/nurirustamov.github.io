"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[812],{8132:(e,s,t)=>{t.d(s,{A:()=>l});t(5043);var a=t(579);const l=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(t),children:s})}},9812:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(9379),l=t(5043),r=t(3216),i=t(8132),c=t(4450),n=t(1425),o=t(3918),d=t(579);const m=e=>{let{isOpen:s,onClose:t,articles:r,quizzes:i,onAddItems:m,existingItems:x}=e;const[h,u]=(0,l.useState)(new Set),[p,j]=(0,l.useState)("articles"),[g,b]=(0,l.useState)("all"),{availableArticles:y,availableQuizzes:f}=(0,l.useMemo)(()=>{const e=new Set(x.map(e=>"".concat(e.item_type,"-").concat(e.item_id)));return{availableArticles:r.filter(s=>!e.has("article-".concat(s.id))).map(e=>(0,a.A)((0,a.A)({},e),{},{type:"article"})),availableQuizzes:i.filter(s=>!e.has("quiz-".concat(s.id))).map(e=>(0,a.A)((0,a.A)({},e),{},{type:"quiz"}))}},[r,i,x]),v=(0,l.useMemo)(()=>["all",...new Set(("articles"===p?y:f).map(e=>e.category||"Kateqoriyas\u0131z"))],[p,y,f]);(0,l.useEffect)(()=>{b("all")},[p]);const N=(0,l.useMemo)(()=>{const e="articles"===p?y:f;return"all"===g?e:e.filter(e=>(e.category||"Kateqoriyas\u0131z")===g)},[p,y,f,g]);return s?(0,d.jsxs)(n.A,{isOpen:s,onClose:t,title:"Material \u0259lav\u0259 et",children:[(0,d.jsx)("div",{className:"border-b border-gray-200 mb-4",children:(0,d.jsxs)("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[(0,d.jsxs)("button",{onClick:()=>j("articles"),className:"".concat("articles"===p?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm flex items-center gap-2"),children:[(0,d.jsx)(o.AQ,{})," M\u0259qal\u0259l\u0259r (",y.length,")"]}),(0,d.jsxs)("button",{onClick:()=>j("quizzes"),className:"".concat("quizzes"===p?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm flex items-center gap-2"),children:[(0,d.jsx)(o.oo,{})," Testl\u0259r (",f.length,")"]})]})}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kateqoriya \xfczr\u0259 filtr"}),(0,d.jsx)("select",{id:"category-filter",value:g,onChange:e=>b(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-white focus:ring-orange-500 focus:border-orange-500",children:v.map(e=>(0,d.jsx)("option",{value:e,children:"all"===e?"B\xfct\xfcn Kateqoriyalar":e},e))})]}),(0,d.jsx)("div",{className:"max-h-72 overflow-y-auto space-y-2 pr-2",children:N.length>0?N.map(e=>{const s="".concat(e.type,"-").concat(e.id);return(0,d.jsxs)("div",{className:"flex items-center p-2 rounded-md hover:bg-gray-100",children:[(0,d.jsx)("input",{type:"checkbox",id:s,checked:h.has(s),onChange:()=>(e=>{const s=new Set(h),t="".concat(e.type,"-").concat(e.id);s.has(t)?s.delete(t):s.add(t),u(s)})(e),className:"h-4 w-4 text-orange-600 rounded mr-3"}),(0,d.jsxs)("label",{htmlFor:s,className:"flex-1 cursor-pointer text-sm font-medium flex items-center",children:["article"===e.type?(0,d.jsx)(o.AQ,{className:"mr-2 text-blue-500"}):(0,d.jsx)(o.oo,{className:"mr-2 text-purple-500"}),e.title]})]},s)}):(0,d.jsx)("p",{className:"text-center text-gray-500 py-10",children:"Bu kateqoriyada \u0259lav\u0259 edil\u0259c\u0259k material yoxdur."})}),(0,d.jsx)("div",{className:"mt-6 flex justify-end",children:(0,d.jsxs)(c.A,{onClick:()=>{const e=[...y,...f].filter(e=>h.has("".concat(e.type,"-").concat(e.id)));m(e),u(new Set),t()},disabled:0===h.size,children:[(0,d.jsx)(o.c1,{})," Se\xe7ilmi\u015fl\u0259ri \u0259lav\u0259 et (",h.size,")"]})})]}):null},x=e=>{let{course:s,onDraftChange:t,articles:n,quizzes:x,onSave:h,showToast:u}=e;const[p,j]=(0,l.useState)(!1),g=(0,r.Zp)(),b=e=>{const{name:s,value:l,type:r,checked:i}=e.target;t(e=>(0,a.A)((0,a.A)({},e),{},{[s]:"checkbox"===r?i:l}))},y=(e,l)=>{const r=[...s.items],[i]=r.splice(e,1);r.splice(e+l,0,i),t(e=>(0,a.A)((0,a.A)({},e),{},{items:r}))};return s?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m,{isOpen:p,onClose:()=>j(!1),articles:n,quizzes:x,onAddItems:e=>{const s=e.map(e=>({item_id:e.id,item_type:e.type,title:e.title}));t(e=>(0,a.A)((0,a.A)({},e),{},{items:[...e.items,...s]}))},existingItems:s.items}),(0,d.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[(0,d.jsxs)("div",{className:"lg:col-span-1 space-y-6 lg:sticky lg:top-24",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:s.id?"Kursu Redakt\u0259 Et":"Yeni Kurs Yarat"}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,d.jsxs)(c.A,{variant:"secondary",onClick:()=>g("/admin/courses"),className:"w-full justify-center",children:[(0,d.jsx)(o.A6,{})," L\u0259\u011fv et"]}),(0,d.jsxs)(c.A,{onClick:()=>{if(!s.title.trim())return void u("Kursun ba\u015fl\u0131\u011f\u0131 bo\u015f ola bilm\u0259z.");const e=(0,a.A)((0,a.A)({},s),{},{items:s.items.map((e,s)=>(0,a.A)((0,a.A)({},e),{},{order:s}))});h(e)},className:"w-full justify-center",children:[(0,d.jsx)(o.Sr,{})," Yadda saxla"]})]})]}),(0,d.jsxs)(i.A,{children:[(0,d.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,d.jsx)(o.AQ,{})," \u018fsas M\u0259lumatlar"]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kursun Ba\u015fl\u0131\u011f\u0131"}),(0,d.jsx)("input",{type:"text",name:"title",value:s.title,onChange:b,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\u0259svir"}),(0,d.jsx)("textarea",{name:"description",value:s.description,onChange:b,rows:"4",className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",name:"is_published",checked:!!s.is_published,onChange:b,className:"h-4 w-4 text-orange-600 rounded border-gray-300"}),(0,d.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"D\u0259rc edilsin"})]})})]})]})]}),(0,d.jsx)("div",{className:"lg:col-span-2",children:(0,d.jsxs)(i.A,{children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h3",{className:"font-bold",children:"Kursun Proqram\u0131"}),(0,d.jsxs)(c.A,{onClick:()=>j(!0),children:[(0,d.jsx)(o.c1,{})," Material \u0259lav\u0259 et"]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[s.items.map((e,l)=>(0,d.jsxs)("div",{className:"p-3 rounded-lg flex items-center justify-between bg-white border",children:[(0,d.jsxs)("div",{className:"flex items-center",children:["article"===e.item_type?(0,d.jsx)(o.AQ,{className:"mr-3 text-blue-500"}):(0,d.jsx)(o.oo,{className:"mr-3 text-purple-500"}),(0,d.jsx)("span",{className:"font-medium",children:e.title})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(c.A,{size:"sm",variant:"ghost",onClick:()=>y(l,-1),disabled:0===l,children:(0,d.jsx)(o.Kp,{})}),(0,d.jsx)(c.A,{size:"sm",variant:"ghost",onClick:()=>y(l,1),disabled:l===s.items.length-1,children:(0,d.jsx)(o.ZL,{})}),(0,d.jsx)(c.A,{size:"sm",variant:"danger",onClick:()=>(e=>{const l=s.items.filter((s,t)=>t!==e);t(e=>(0,a.A)((0,a.A)({},e),{},{items:l}))})(l),children:(0,d.jsx)(o.uc,{})})]})]},"".concat(e.item_type,"-").concat(e.item_id,"-").concat(l))),0===s.items.length&&(0,d.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Kursun proqram\u0131 bo\u015fdur."})]})]})})]})]}):(0,d.jsx)("div",{children:"Y\xfckl\u0259nir..."})}}}]);
//# sourceMappingURL=812.be3642e0.chunk.js.map