"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[4],{6004:(e,t,l)=>{l.r(t),l.d(t,{default:()=>k});var a=l(5043),s=l(5475),r=l(7001),n=l(8132),i=l(4450),d=l(3918),c=l(3986);const o=["title","titleId"];function m(e,t){let{title:l,titleId:s}=e,r=(0,c.A)(e,o);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),l?a.createElement("title",{id:s},l):null,a.createElement("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z",clipRule:"evenodd"}))}const x=a.forwardRef(m),u=["title","titleId"];function h(e,t){let{title:l,titleId:s}=e,r=(0,c.A)(e,u);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),l?a.createElement("title",{id:s},l):null,a.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const f=a.forwardRef(h),g=["title","titleId"];function j(e,t){let{title:l,titleId:s}=e,r=(0,c.A)(e,g);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),l?a.createElement("title",{id:s},l):null,a.createElement("path",{d:"M11.7 2.805a.75.75 0 0 1 .6 0A60.65 60.65 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337 49.948 49.948 0 0 0-9.902 3.912l-.003.002c-.114.06-.227.119-.34.18a.75.75 0 0 1-.707 0A50.88 50.88 0 0 0 7.5 12.173v-.224c0-.131.067-.248.172-.311a54.615 54.615 0 0 1 4.653-2.52.75.75 0 0 0-.65-1.352 56.123 56.123 0 0 0-4.78 2.589 1.858 1.858 0 0 0-.859 1.228 49.803 49.803 0 0 0-4.634-1.527.75.75 0 0 1-.231-1.337A60.653 60.653 0 0 1 11.7 2.805Z"}),a.createElement("path",{d:"M13.06 15.473a48.45 48.45 0 0 1 7.666-3.282c.134 1.414.22 2.843.255 4.284a.75.75 0 0 1-.46.711 47.87 47.87 0 0 0-8.105 4.342.75.75 0 0 1-.832 0 47.87 47.87 0 0 0-8.104-4.342.75.75 0 0 1-.461-.71c.035-1.442.121-2.87.255-4.286.921.304 1.83.634 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.66a6.727 6.727 0 0 0 .551-1.607 1.5 1.5 0 0 0 .14-2.67v-.645a48.549 48.549 0 0 1 3.44 1.667 2.25 2.25 0 0 0 2.12 0Z"}),a.createElement("path",{d:"M4.462 19.462c.42-.419.753-.89 1-1.395.453.214.902.435 1.347.662a6.742 6.742 0 0 1-1.286 1.794.75.75 0 0 1-1.06-1.06Z"}))}const p=a.forwardRef(j);var y=l(579);const v={sniper:x,marathoner:f,newbie:p,default:f},b={gold:"text-yellow-500",silver:"text-gray-400",bronze:"text-orange-700",default:"text-gray-400"},N=e=>{let{achievement:t}=e;if(!t)return null;const l=v[t.icon_name]||v.default,a=b[t.badge_color]||b.default;return(0,y.jsxs)("div",{className:"flex flex-col items-center justify-start text-center p-3 rounded-lg bg-gray-50 border border-gray-200 w-32 h-30",title:"".concat(t.name,": ").concat(t.description),children:[(0,y.jsx)(l,{className:"h-10 w-10 ".concat(a," mb-2 flex-shrink-0")}),(0,y.jsx)("p",{className:"text-xs font-bold text-gray-800 break-words",children:t.name}),(0,y.jsx)("p",{className:"mt-1 text-gray-500",style:{fontSize:"0.7rem",lineHeight:"0.9rem"},children:t.description})]})},w=e=>{let{experience:t}=e;const l=Math.floor(t/100)+1,a=100*l,s=100*(l-1),r=(t-s)/(a-s)*100;return(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,y.jsxs)("span",{className:"font-bold text-orange-600",children:["S\u0259viyy\u0259 ",l]}),(0,y.jsxs)("span",{className:"text-sm text-gray-500",children:[t," / ",a," XP"]})]}),(0,y.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,y.jsx)("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2.5 rounded-full",style:{width:"".concat(r,"%")}})})]})},k=e=>{let{session:t,profile:l,showToast:c,onProfileUpdate:o,userAchievements:m,allAchievements:x}=e;const[u,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),[j,p]=(0,a.useState)(""),[v,b]=(0,a.useState)(""),[k,A]=(0,a.useState)("");(0,a.useEffect)(()=>{l&&(g(l.first_name||""),p(l.last_name||""))},[l]);const{earned:P,unearned:E}=(0,a.useMemo)(()=>{if(!x||!m)return{earned:[],unearned:[]};const e=new Set(m.map(e=>e.achievement_id));return{earned:x.filter(t=>e.has(t.id)),unearned:x.filter(t=>!e.has(t.id))}},[x,m]);if(!t||!l)return(0,y.jsx)("div",{children:"Y\xfckl\u0259nir..."});const M=l.experience_points||0,S=l.daily_streak||0;return(0,y.jsxs)("div",{className:"animate-fade-in space-y-6 max-w-4xl mx-auto",children:[(0,y.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[(0,y.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"M\u0259nim Profilim"}),(0,y.jsx)(s.N_,{to:"/student/".concat(t.user.id),children:(0,y.jsxs)(i.A,{variant:"primary",children:[(0,y.jsx)(d.r9,{})," M\u0259nim N\u0259tic\u0259l\u0259rim"]})})]}),(0,y.jsx)(n.A,{children:(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-center",children:[(0,y.jsx)("div",{className:"md:col-span-2",children:(0,y.jsx)(w,{experience:M})}),(0,y.jsxs)("div",{className:"flex justify-around md:justify-end gap-6 text-center",children:[(0,y.jsxs)("div",{className:"flex flex-col items-center",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 text-2xl font-bold text-yellow-500",children:[(0,y.jsx)(d.Gg,{}),(0,y.jsx)("span",{children:M})]}),(0,y.jsx)("span",{className:"text-sm text-gray-500",children:"T\u0259cr\xfcb\u0259 Xal\u0131"})]}),(0,y.jsxs)("div",{className:"flex flex-col items-center",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 text-2xl font-bold text-red-500",children:[(0,y.jsx)(d.Y3,{}),(0,y.jsx)("span",{children:S})]}),(0,y.jsx)("span",{className:"text-sm text-gray-500",children:"G\xfcnl\xfck Seriya"})]})]})]})}),(0,y.jsxs)(n.A,{children:[(0,y.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,y.jsx)(d.OR,{})," Qazan\u0131lm\u0131\u015f Nailiyy\u0259tl\u0259r"]}),P.length>0?(0,y.jsx)("div",{className:"flex flex-wrap gap-4",children:P.map(e=>(0,y.jsx)(N,{achievement:e},e.id))}):(0,y.jsx)("p",{className:"text-gray-500",children:"H\u0259l\u0259 he\xe7 bir nailiyy\u0259tiniz yoxdur. Testl\u0259ri tamamlay\u0131n v\u0259 ilkini qazan\u0131n!"})]}),(0,y.jsxs)(n.A,{children:[(0,y.jsx)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-gray-500",children:"Qazan\u0131lacaq Nailiyy\u0259tl\u0259r"}),E.length>0?(0,y.jsx)("div",{className:"flex flex-wrap gap-4",children:E.map(e=>(0,y.jsx)("div",{className:"grayscale opacity-60",children:(0,y.jsx)(N,{achievement:e})},e.id))}):(0,y.jsx)("p",{className:"text-green-600 font-semibold",children:"T\u0259brik edirik! B\xfct\xfcn m\xfcmk\xfcn nailiyy\u0259tl\u0259ri qazanm\u0131s\u0131n\u0131z!"})]}),(0,y.jsxs)(n.A,{children:[(0,y.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u015e\u0259xsi M\u0259lumatlar"}),(0,y.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);const{data:l,error:a}=await r.N.from("profiles").update({first_name:f,last_name:j,username:"".concat(f," ").concat(j)}).eq("id",t.user.id).select().single();a?c("Profil yenil\u0259n\u0259rk\u0259n x\u0259ta: ".concat(a.message)):(o(l),c("Profil u\u011furla yenil\u0259ndi!")),h(!1)},className:"space-y-4",children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ad"}),(0,y.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Soyad"}),(0,y.jsx)("input",{type:"text",value:j,onChange:e=>p(e.target.value),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),(0,y.jsx)("div",{className:"flex justify-end",children:(0,y.jsx)(i.A,{type:"submit",disabled:u,children:u?"Yenil\u0259nir...":"M\u0259lumatlar\u0131 Yenil\u0259"})})]})]}),(0,y.jsxs)(n.A,{children:[(0,y.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Parolu D\u0259yi\u015f"}),(0,y.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v!==k)return void c("Parollar eyni deyil!");if(v.length<6)return void c("Parol \u0259n az\u0131 6 simvoldan ibar\u0259t olmal\u0131d\u0131r.");h(!0);const{error:t}=await r.N.auth.updateUser({password:v});t?c("Parol yenil\u0259n\u0259rk\u0259n x\u0259ta: ".concat(t.message)):(c("Parol u\u011furla yenil\u0259ndi!"),b(""),A("")),h(!1)},className:"space-y-4",children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Yeni Parol"}),(0,y.jsx)("input",{type:"password",value:v,onChange:e=>b(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Yeni Parolu T\u0259sdiql\u0259"}),(0,y.jsx)("input",{type:"password",value:k,onChange:e=>A(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),(0,y.jsx)("div",{className:"flex justify-end",children:(0,y.jsx)(i.A,{type:"submit",disabled:u,children:u?"D\u0259yi\u015filir...":"Parolu D\u0259yi\u015f"})})]})]})]})}},8132:(e,t,l)=>{l.d(t,{A:()=>s});l(5043);var a=l(579);const s=e=>{let{children:t,className:l=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(l),children:t})}}}]);
//# sourceMappingURL=4.978f701c.chunk.js.map