{"version":3,"file":"static/js/383.0e3b4f71.chunk.js","mappings":"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","sources":["pages/LeaderboardPage.js","components/ui/Card.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport Card from '../components/ui/Card';\r\nimport { GoldMedalIcon, SilverMedalIcon, BronzeMedalIcon, TrophyIcon, FireIcon } from '../assets/icons';\r\n\r\nconst LeaderboardList = ({ users, title, currentUserId, valueKey, valueLabel }) => (\r\n    <Card>\r\n        <h2 className=\"text-xl font-bold text-center mb-4 text-orange-600\">{title}</h2>\r\n        {users.length > 0 ? (\r\n            <ol className=\"space-y-3\">\r\n                {users.map((user, index) => (\r\n                    <li key={user.user_id} className={`flex items-center justify-between p-3 rounded-lg transition ${user.user_id === currentUserId ? 'bg-orange-100 border-2 border-orange-300' : 'bg-gray-50 hover:bg-gray-100'}`}>\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <span className=\"text-lg font-bold text-gray-400 w-6 text-center\">{index + 1}</span>\r\n                            <span className=\"flex items-center gap-2\">\r\n                                {index === 0 ? <GoldMedalIcon /> : index === 1 ? <SilverMedalIcon /> : index === 2 ? <BronzeMedalIcon /> : <TrophyIcon className=\"w-5 h-5 text-gray-400\" />}\r\n                                <span className={`font-semibold ${user.user_id === currentUserId ? 'text-orange-700 font-bold' : 'text-gray-800'}`}>\r\n                                    {user.userName} {user.userSurname} {user.user_id === currentUserId && '(Siz)'}\r\n                                </span>\r\n                            </span>\r\n                        </div>\r\n                        <span className=\"font-bold text-lg text-orange-500\">{user[valueKey]} {valueLabel}</span>\r\n                    </li>\r\n                ))}\r\n            </ol>\r\n        ) : (\r\n            <p className=\"text-center text-gray-500 py-8\">Bu reytinq üçün kifayət qədər data yoxdur.</p>\r\n        )}\r\n    </Card>\r\n);\r\n\r\nconst LeaderboardPage = ({ results, profile, allUsers }) => {\r\n    const [activeTab, setActiveTab] = useState('weekly');\r\n    const currentUserId = profile?.id;\r\n\r\n    const leaderboardData = useMemo(() => {\r\n        const processResults = (filteredResults) => {\r\n            const userScores = filteredResults.reduce((acc, result) => {\r\n                if (!result.user_id) return acc;\r\n                \r\n                const key = result.user_id;\r\n                if (!acc[key]) {\r\n                    acc[key] = { \r\n                        user_id: result.user_id,\r\n                        totalScore: 0, \r\n                        userName: result.userName, \r\n                        userSurname: result.userSurname \r\n                    };\r\n                }\r\n                acc[key].totalScore += result.score;\r\n                return acc;\r\n            }, {});\r\n\r\n            return Object.values(userScores)\r\n                .sort((a, b) => b.totalScore - a.totalScore)\r\n                .slice(0, 10);\r\n        };\r\n\r\n        const sevenDaysAgo = new Date();\r\n        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\r\n\r\n        const weeklyResults = results.filter(r => new Date(r.created_at) > sevenDaysAgo);\r\n\r\n        return {\r\n            weekly: processResults(weeklyResults),\r\n            overall: processResults(results),\r\n        };\r\n    }, [results]);\r\n\r\n    const streakLeaderboard = useMemo(() => {\r\n        if (!allUsers) return [];\r\n        return allUsers\r\n            .filter(u => u.daily_streak > 0)\r\n            .sort((a, b) => b.daily_streak - a.daily_streak)\r\n            .slice(0, 10)\r\n            .map(u => ({\r\n                user_id: u.id,\r\n                userName: u.first_name,\r\n                userSurname: u.last_name,\r\n                streak: u.daily_streak,\r\n            }));\r\n    }, [allUsers]);\r\n\r\n    return (\r\n        <div className=\"animate-fade-in space-y-6\">\r\n            <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-800\">Reytinqlər</h1>\r\n            \r\n            <div className=\"border-b border-gray-200\">\r\n                <nav className=\"-mb-px flex space-x-6\" aria-label=\"Tabs\">\r\n                    <button onClick={() => setActiveTab('weekly')} className={`${activeTab === 'weekly' ? 'border-orange-500 text-orange-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}>Həftəlik Reytinq</button>\r\n                    <button onClick={() => setActiveTab('overall')} className={`${activeTab === 'overall' ? 'border-orange-500 text-orange-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}>Ümumi Reytinq</button>\r\n                    <button onClick={() => setActiveTab('streak')} className={`${activeTab === 'streak' ? 'border-orange-500 text-orange-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2`}><FireIcon /> Günlük Seriya</button>\r\n                </nav>\r\n            </div>\r\n\r\n            {activeTab === 'weekly' && <LeaderboardList users={leaderboardData.weekly} title=\"Həftənin Liderləri\" currentUserId={currentUserId} valueKey=\"totalScore\" valueLabel=\"bal\" />}\r\n            {activeTab === 'overall' && <LeaderboardList users={leaderboardData.overall} title=\"Bütün Zamanların Liderləri\" currentUserId={currentUserId} valueKey=\"totalScore\" valueLabel=\"bal\" />}\r\n            {activeTab === 'streak' && <LeaderboardList users={streakLeaderboard} title=\"Ən Uzun Günlük Seriya\" currentUserId={currentUserId} valueKey=\"streak\" valueLabel=\"gün\" />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LeaderboardPage;\r\n","import React from 'react';\n\nconst Card = ({ children, className = '' }) => (\n    <div className={`bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ${className}`}>{children}</div>\n);\n\nexport default Card;"],"names":["LeaderboardList","_ref","users","title","currentUserId","valueKey","valueLabel","_jsxs","Card","children","_jsx","className","length","map","user","index","concat","user_id","GoldMedalIcon","SilverMedalIcon","BronzeMedalIcon","TrophyIcon","userName","userSurname","_ref2","results","profile","allUsers","activeTab","setActiveTab","useState","id","leaderboardData","useMemo","processResults","filteredResults","userScores","reduce","acc","result","key","totalScore","score","Object","values","sort","a","b","slice","sevenDaysAgo","Date","setDate","getDate","weekly","filter","r","created_at","overall","streakLeaderboard","u","daily_streak","first_name","last_name","streak","onClick","FireIcon"],"sourceRoot":""}