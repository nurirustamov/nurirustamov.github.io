"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[493],{1493:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});s(5043);var r=s(8132),n=s(4450),a=s(3918),l=s(9207),i=s(579);const o=e=>{let{quiz:t,result:s,onBack:o,profile:c,fetchComments:d,postComment:m,deleteComment:x}=e;const{userAnswers:p,questionOrder:h,time_per_question:u}=s,g={correct:{container:"bg-green-50 border-l-4 border-green-400",icon:(0,i.jsx)(a.C1,{}),iconColor:"text-green-500",textColor:"text-green-700"},incorrect:{container:"bg-red-50 border-l-4 border-red-400",icon:(0,i.jsx)(a.qh,{}),iconColor:"text-red-500",textColor:"text-red-700"},pending:{container:"bg-yellow-50 border-l-4 border-yellow-400",icon:(0,i.jsx)(a.O4,{}),iconColor:"text-yellow-500",textColor:"text-yellow-700"}};return(0,i.jsxs)("div",{className:"animate-fade-in",children:[(0,i.jsxs)(n.A,{onClick:o,variant:"secondary",className:"mb-6",children:[(0,i.jsx)(a.A6,{}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"N\u0259tic\u0259l\u0259r\u0259 qay\u0131t"}),(0,i.jsx)("span",{className:"sm:hidden",children:"Geri"})]}),(0,i.jsxs)(r.A,{children:[(0,i.jsxs)("h1",{className:"text-xl sm:text-2xl font-bold text-center text-orange-600 mb-6 sm:mb-8",children:["Cavablar\u0131n t\u0259hlili: ",t.title]}),(0,i.jsx)("div",{className:"space-y-6",children:h.map((e,t)=>{const s=p[e.id],{status:r,userAnswerText:n,correctAnswerText:o}=((e,t)=>{if("open"===e.type)return{status:"pending",userAnswerText:t||"Cavab yoxdur",correctAnswerText:"Yoxlama g\xf6zl\u0259nilir"};let s=!1,r="",n=t||"Cavab yoxdur";if("single"===e.type)s=t===e.options[e.correctAnswers[0]],r=e.options[e.correctAnswers[0]];else if("multiple"===e.type){const a=e.correctAnswers.map(t=>e.options[t]).sort(),l=t?[...t].sort():[];s=JSON.stringify(a)===JSON.stringify(l),r=a.join(", "),n=t&&t.length>0?t.join(", "):"Cavab yoxdur"}else"textInput"===e.type?(s=t&&e.correctAnswers[0].toLowerCase()===t.toLowerCase(),r=e.correctAnswers[0]):"trueFalse"===e.type?(s=t===e.correctAnswer,r=e.correctAnswer?"Do\u011fru":"Yanl\u0131\u015f",n=!0===t?"Do\u011fru":!1===t?"Yanl\u0131\u015f":"Cavab yoxdur"):"ordering"===e.type?(s=JSON.stringify(t)===JSON.stringify(e.orderItems),r=e.orderItems.map((e,t)=>"".concat(t+1,". ").concat(e)).join("; "),n=t&&t.length>0?t.map((e,t)=>"".concat(t+1,". ").concat(e)).join("; "):"Cavab yoxdur"):"fillInTheBlanks"===e.type&&(s=Array.isArray(t)&&t.length===e.correctAnswers.length&&t.every((t,s)=>(t||"").trim().toLowerCase()===(e.correctAnswers[s]||"").trim().toLowerCase()),r=e.correctAnswers.join(", "),n=t&&t.length>0?t.join(", "):"Cavab yoxdur");return{status:s?"correct":"incorrect",userAnswerText:n,correctAnswerText:r}})(e,s),h=g[r];return(0,i.jsxs)("div",{className:"p-3 sm:p-4 rounded-lg ".concat(h.container),children:[(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("span",{className:"mr-3 mt-1 ".concat(h.iconColor),children:h.icon}),(0,i.jsxs)("h3",{className:"font-semibold text-base sm:text-lg text-gray-800 flex-1",children:[t+1,". ",e.text]})]}),u&&void 0!==u[e.id]&&(0,i.jsxs)("div",{className:"pl-8 mt-2 flex items-center text-xs text-gray-500",children:[(0,i.jsx)(a.O4,{className:"w-4 h-4 mr-1"}),(0,i.jsxs)("span",{children:["S\u0259rf olunan vaxt: ",Math.round(u[e.id])," saniy\u0259"]})]}),e.imageUrl&&(0,i.jsx)("div",{className:"pl-8 mt-3",children:(0,i.jsx)("img",{src:e.imageUrl,alt:"Question illustration",className:"rounded-lg max-h-40 sm:max-h-60 w-auto mx-auto",onError:e=>e.target.style.display="none"})}),"fillInTheBlanks"===e.type?(0,i.jsx)("div",{className:"mt-3 pl-8 text-lg leading-loose",children:e.text.split(/(\[.*?\])/g).filter(e=>e).map((t,r)=>{if(t.startsWith("[")&&t.endsWith("]")){const n=e.text.substring(0,e.text.indexOf(t)).split("[").length-1,a=(s||[])[n]||"",l=e.correctAnswers[n]||"",c=a.trim().toLowerCase()===l.trim().toLowerCase();return(0,i.jsxs)("span",{className:"inline-block font-semibold px-2 py-1 rounded-md text-sm ".concat(c?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[a||"___",!c&&(0,i.jsxs)("span",{className:"ml-2 text-xs text-green-700 font-bold",children:["(",o,")"]})]},r)}return(0,i.jsx)("span",{children:t},r)})}):(0,i.jsxs)("div",{className:"mt-3 pl-8 space-y-2 text-sm sm:text-base",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Sizin cavab\u0131n\u0131z:"})," ",(0,i.jsx)("span",{className:"".concat(h.textColor," font-medium"),children:n})]}),"incorrect"===r&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"D\xfczg\xfcn cavab:"})," ",(0,i.jsx)("span",{className:"text-green-700 font-medium",children:o})]}),"pending"===r&&(0,i.jsx)("p",{className:"font-semibold text-yellow-800",children:o})]}),e.explanation&&(0,i.jsx)("div",{className:"mt-4 pt-3 pl-8 border-t border-gray-300/70",children:(0,i.jsxs)("div",{className:"flex items-start text-sm text-blue-800",children:[(0,i.jsx)("span",{className:"mr-2 mt-1 flex-shrink-0",children:(0,i.jsx)(a.xm,{})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{className:"font-semibold",children:"\u0130zah:"}),(0,i.jsx)("p",{className:"mt-1 whitespace-pre-wrap",children:e.explanation})]})]})}),(0,i.jsx)("div",{className:"mt-4 pt-4 pl-8 border-t border-gray-300/70",children:(0,i.jsx)(l.A,{targetId:e.id.toString(),targetType:"question",profile:c,fetchComments:d,postComment:m,deleteComment:x})})]},e.id)})})]})]})}},8132:(e,t,s)=>{s.d(t,{A:()=>n});s(5043);var r=s(579);const n=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(s),children:t})}},9207:(e,t,s)=>{s.d(t,{A:()=>m});var r=s(9379),n=s(5043),a=s(3216),l=s(5475),i=s(4450),o=s(3918),c=s(579);const d=e=>{var t;let{comment:s,onReply:r,onDelete:a,profile:l}=e;const[m,x]=(0,n.useState)(!1),[p,h]=(0,n.useState)("");return(0,c.jsxs)("div",{className:"flex flex-col gap-2 p-3 rounded-lg bg-white shadow-sm",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-full bg-orange-200 flex items-center justify-center font-bold text-orange-600",children:(null===(t=s.profiles.first_name)||void 0===t?void 0:t[0])||"U"}),(0,c.jsxs)("span",{className:"font-semibold text-gray-800",children:[s.profiles.first_name," ",s.profiles.last_name]})]}),(0,c.jsx)("span",{className:"text-xs text-gray-400",children:new Date(s.created_at).toLocaleString()})]}),(0,c.jsx)("p",{className:"text-gray-700 pl-10",children:s.content}),(0,c.jsxs)("div",{className:"flex items-center justify-end gap-2 pl-10",children:[l&&(0,c.jsxs)(i.A,{variant:"secondary",size:"sm",onClick:()=>x(!m),children:[(0,c.jsx)(o.Sb,{})," Cavab ver"]}),(null===l||void 0===l?void 0:l.id)===s.user_id&&(0,c.jsx)(i.A,{variant:"danger",size:"sm",onClick:()=>a(s.id),children:(0,c.jsx)(o.uc,{})})]}),m&&(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p.trim()&&(r(p,s.id),h(""),x(!1))},className:"pl-10 mt-2 flex gap-2",children:[(0,c.jsx)("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"Cavab verilir: ".concat(s.profiles.first_name,"..."),className:"flex-grow mt-1 block w-full rounded-md border-gray-300 shadow-sm text-sm"}),(0,c.jsx)(i.A,{type:"submit",size:"sm",children:"G\xf6nd\u0259r"})]}),s.children&&s.children.length>0&&(0,c.jsx)("div",{className:"pl-6 border-l-2 border-orange-100 mt-2 space-y-3",children:s.children.map(e=>(0,c.jsx)(d,{comment:e,onReply:r,onDelete:a,profile:l},e.id))})]})},m=e=>{let{targetId:t,targetType:s,profile:o,fetchComments:m,postComment:x,deleteComment:p}=e;const[h,u]=(0,n.useState)([]),[g,f]=(0,n.useState)(""),j=(0,a.zy)();(0,n.useEffect)(()=>{t&&s&&(async()=>{const e=await m(t,s);u(e||[])})()},[t,s,m]);const y=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n="".concat(j.pathname,"#comment-").concat(r||"new");if(await x(t,s,e,r,n)){const e=await m(t,s);u(e||[]),r||f("")}},b=async e=>{await p(e)&&u(t=>t.filter(t=>t.id!==e))},v=(0,n.useMemo)(()=>{const e={},t=[];return h.forEach(t=>{e[t.id]=(0,r.A)((0,r.A)({},t),{},{children:[]})}),h.forEach(s=>{s.parent_comment_id&&e[s.parent_comment_id]?e[s.parent_comment_id].children.push(e[s.id]):t.push(e[s.id])}),t},[h]);return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["\u015e\u0259rhl\u0259r (",h.length,")"]}),o&&(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y(g)},className:"flex gap-2 items-start",children:[(0,c.jsx)("textarea",{value:g,onChange:e=>f(e.target.value),placeholder:"\u015e\u0259rhinizi yaz\u0131n...",className:"flex-grow mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:"3"}),(0,c.jsx)(i.A,{type:"submit",children:"G\xf6nd\u0259r"})]}),!o&&(0,c.jsxs)("p",{className:"text-center p-4 bg-gray-50 rounded-md",children:["\u015e\u0259rh yazmaq \xfc\xe7\xfcn ",(0,c.jsx)(l.N_,{to:"/auth",className:"text-orange-600 font-semibold hover:underline",children:"daxil olun"}),"."]}),(0,c.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,c.jsx)(d,{comment:e,onReply:y,onDelete:b,profile:o},e.id))})]})}}}]);
//# sourceMappingURL=493.24361327.chunk.js.map