"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[178],{8132:(e,r,s)=>{s.d(r,{A:()=>n});s(5043);var t=s(579);const n=e=>{let{children:r,className:s=""}=e;return(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(s),children:r})}},8178:(e,r,s)=>{s.r(r),s.d(r,{default:()=>x});var t=s(9379),n=s(5043),l=s(3216),a=s(8132),i=s(4450),d=s(579);const o=e=>{let{question:r,onAnswer:s}=e;const[t,l]=(0,n.useState)([]),a=(0,n.useRef)(null),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{l([...r.orderItems].sort(()=>Math.random()-.5))},[r]);const o=()=>{const e=[...t],r=e.splice(a.current,1)[0];e.splice(i.current,0,r),a.current=null,i.current=null,l(e),s(e)};return(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Elementl\u0259ri d\xfczg\xfcn ard\u0131c\u0131ll\u0131qla yerl\u0259\u015fdirm\u0259k \xfc\xe7\xfcn s\xfcr\xfc\u015fd\xfcr\xfcn."}),t.map((e,r)=>(0,d.jsx)("div",{draggable:!0,onDragStart:()=>a.current=r,onDragEnter:()=>i.current=r,onDragEnd:o,onDragOver:e=>e.preventDefault(),className:"p-3 mb-2 bg-gray-100 rounded-md cursor-grab active:cursor-grabbing border border-gray-200",children:e},r))]})};var c=s(3918);const u=(e,r)=>{if(void 0===r||null===r)return!1;if("open"===e.type)return!1;switch(e.type){case"single":return r===e.options[e.correctAnswers[0]];case"multiple":const s=e.correctAnswers.map(r=>e.options[r]).sort(),t=r?[...r].sort():[];return JSON.stringify(s)===JSON.stringify(t);case"textInput":return r.trim().toLowerCase()===e.correctAnswers[0].trim().toLowerCase();case"trueFalse":return r===e.correctAnswer;case"ordering":return JSON.stringify(r)===JSON.stringify(e.orderItems);default:return!1}},m=e=>{let{q:r,index:s,answers:t,handleAnswerChange:n,isPracticeMode:l,isAnswerChecked:a,shuffledOptions:i,isSubmitting:m}=e;const x=r.shuffleOptions&&i[r.id]?i[r.id]:r.options,g=(e,s)=>{var n;if(!l||!a)return"border-transparent";let i=!1;if("single"===r.type&&(i=s===r.correctAnswers[0]),"multiple"===r.type&&(i=r.correctAnswers.includes(s)),i)return"border-green-500 bg-green-100";let d=!1;return"single"===r.type&&(d=t[r.id]===e),"multiple"===r.type&&(d=null===(n=t[r.id])||void 0===n?void 0:n.includes(e)),d?"border-red-500 bg-red-100":"border-transparent"};return(0,d.jsxs)("div",{className:"bg-orange-50 p-4 sm:p-6 rounded-lg mb-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("h3",{className:"font-semibold text-lg sm:text-xl text-gray-800 mb-4 flex-1",children:[s+1,". ",r.text]}),(0,d.jsx)("button",{onClick:()=>(e=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const r=new SpeechSynthesisUtterance(e);r.lang="az-AZ",window.speechSynthesis.speak(r)}else alert("Sizin brauzeriniz m\u0259tni s\u0259sl\u0259ndirm\u0259yi d\u0259st\u0259kl\u0259mir.")})(r.text),className:"text-gray-500 hover:text-orange-500 ml-2 sm:ml-4 p-2",children:(0,d.jsx)(c.pD,{})})]}),r.audioUrl&&(0,d.jsx)("div",{className:"my-4",children:(0,d.jsx)("audio",{controls:!0,src:r.audioUrl,className:"w-full",children:"Your browser does not support the audio element."})}),r.imageUrl&&(0,d.jsx)("img",{src:r.imageUrl,alt:"Question illustration",className:"my-4 rounded-lg max-h-60 w-full object-contain mx-auto",onError:e=>e.target.style.display="none"}),"single"===r.type&&x.map((e,s)=>(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsxs)("label",{className:"block p-3 rounded-lg hover:bg-orange-100 cursor-pointer border-2 ".concat(g(e,s)),children:[(0,d.jsx)("input",{type:"radio",name:r.id,value:e,checked:t[r.id]===e,onChange:e=>n(r.id,e.target.value),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500",disabled:l&&a||m}),e]})},s)),"multiple"===r.type&&x.map((e,s)=>{var i;return(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsxs)("label",{className:"block p-3 rounded-lg hover:bg-orange-100 cursor-pointer border-2 ".concat(g(e,s)),children:[(0,d.jsx)("input",{type:"checkbox",name:r.id,value:e,checked:null===(i=t[r.id])||void 0===i?void 0:i.includes(e),onChange:e=>{const s=t[r.id]||[],l=e.target.checked?[...s,e.target.value]:s.filter(r=>r!==e.target.value);n(r.id,l)},className:"mr-3 h-4 w-4 text-orange-600 rounded focus:ring-orange-500",disabled:l&&a||m}),e]})},s)}),"textInput"===r.type&&(0,d.jsx)("input",{type:"text",value:t[r.id]||"",onChange:e=>n(r.id,e.target.value),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm p-3 ".concat(l&&a?u(r,t[r.id])?"bg-green-100 border-green-500":"bg-red-100 border-red-500":""),placeholder:"Cavab\u0131n\u0131z\u0131 daxil edin...",disabled:l&&a||m}),"trueFalse"===r.type&&(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-2",children:[(0,d.jsxs)("label",{className:"block p-3 rounded-lg hover:bg-orange-100 cursor-pointer flex-1 text-center border-2 ".concat(l&&a&&!0===r.correctAnswer?"border-green-500 bg-green-100":l&&a&&!0===t[r.id]?"border-red-500 bg-red-100":"border-transparent"),children:[(0,d.jsx)("input",{type:"radio",name:r.id,checked:!0===t[r.id],onChange:()=>n(r.id,!0),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500",disabled:l&&a||m})," Do\u011fru"]}),(0,d.jsxs)("label",{className:"block p-3 rounded-lg hover:bg-orange-100 cursor-pointer flex-1 text-center border-2 ".concat(l&&a&&!1===r.correctAnswer?"border-green-500 bg-green-100":l&&a&&!1===t[r.id]?"border-red-500 bg-red-100":"border-transparent"),children:[(0,d.jsx)("input",{type:"radio",name:r.id,checked:!1===t[r.id],onChange:()=>n(r.id,!1),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500",disabled:l&&a||m})," Yanl\u0131\u015f"]})]}),"ordering"===r.type&&(0,d.jsx)(o,{question:r,onAnswer:e=>n(r.id,e),disabled:l&&a||m}),"open"===r.type&&(0,d.jsx)("textarea",{value:t[r.id]||"",onChange:e=>n(r.id,e.target.value),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm p-3",placeholder:"Cavab\u0131n\u0131z\u0131 bura daxil edin...",rows:"5",disabled:l&&a||m}),l&&a&&r.explanation&&(0,d.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-400",children:(0,d.jsxs)("div",{className:"flex items-start text-sm text-blue-800",children:[(0,d.jsx)("span",{className:"mr-2 mt-1 flex-shrink-0",children:(0,d.jsx)(c.xm,{})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"font-semibold",children:"\u0130zah:"}),(0,d.jsx)("p",{className:"mt-1 whitespace-pre-wrap",children:r.explanation})]})]})})]},r.id)},x=e=>{let{quiz:r,user:s,onSubmit:o,mode:u="exam"}=e;const x=(0,l.Zp)(),[g,h]=(0,n.useState)(()=>{const e={};return(r.questions||[]).forEach(r=>{"textInput"!==r.type&&"open"!==r.type||(e[r.id]="")}),e}),[b,p]=(0,n.useState)(60*(r.timeLimit||10)),[f,j]=(0,n.useState)(0),[w,v]=(0,n.useState)(!1),[y,N]=(0,n.useState)(!1),k="practice"===u,A=r.display_all_questions&&!k,C=(0,n.useMemo)(()=>r.shuffleQuestions?[...r.questions].sort(()=>Math.random()-.5):r.questions,[r]),S=(0,n.useMemo)(()=>{if(!r.shuffleOptions)return{};const e={};return C.forEach(r=>{["single","multiple"].includes(r.type)&&(e[r.id]=[...r.options].sort(()=>Math.random()-.5))}),e},[C,r.shuffleOptions]),q=(0,n.useCallback)(()=>{w||(v(!0),o&&o(g,C))},[w,o,g,C]);(0,n.useEffect)(()=>{if(k)return;if(b<=0)return void q();const e=setInterval(()=>p(e=>e-1),1e3);return()=>clearInterval(e)},[b,k,q]);const z=(e,r)=>{k&&y||h(s=>(0,t.A)((0,t.A)({},s),{},{[e]:r}))};if(!C||0===C.length)return(0,d.jsx)(a.A,{children:(0,d.jsx)("p",{children:"Bu testd\u0259 h\u0259l\u0259lik sual yoxdur."})});const M=(f+1)/C.length*100;return(0,d.jsx)("div",{className:"animate-fade-in",children:(0,d.jsxs)(a.A,{children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-2 gap-4",children:[(0,d.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-orange-600 text-center sm:text-left",children:r.title}),!k&&(0,d.jsx)("div",{className:"text-2xl font-bold text-orange-500 bg-orange-100 px-4 py-2 rounded-lg w-full sm:w-auto text-center",children:(O=b,"".concat(Math.floor(O/60),":").concat(("0"+O%60).slice(-2)))}),k&&(0,d.jsx)("div",{className:"text-lg font-bold text-blue-500 bg-blue-100 px-4 py-2 rounded-lg w-full sm:w-auto text-center",children:"M\u0259\u015fq Rejimi"})]}),!k&&s&&(0,d.jsxs)("p",{className:"text-center sm:text-left text-gray-600 mb-4",children:["U\u011furlar, ",s.first_name,"!"]}),!A&&!k&&(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-6",children:(0,d.jsx)("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2.5 rounded-full transition-all duration-500",style:{width:"".concat(M,"%")}})}),A?C.map((e,r)=>(0,d.jsx)(m,{q:e,index:r,answers:g,handleAnswerChange:z,isPracticeMode:!1,isAnswerChecked:!1,shuffledOptions:S,isSubmitting:w},e.id)):(0,d.jsx)(m,{q:C[f],index:f,answers:g,handleAnswerChange:z,isPracticeMode:k,isAnswerChecked:y,shuffledOptions:S,isSubmitting:w}),(0,d.jsx)("div",{className:"mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:A?(0,d.jsx)(i.A,{onClick:q,disabled:w,className:"w-full sm:w-auto",children:w?"G\xf6nd\u0259rilir...":(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.Sr,{})," Testi Bitir"]})}):k?y?f<C.length-1?(0,d.jsxs)(i.A,{onClick:()=>{N(!1),j(e=>e+1)},className:"w-full sm:w-auto",children:["N\xf6vb\u0259ti ",(0,d.jsx)(c.fl,{})]}):(0,d.jsxs)(i.A,{onClick:()=>x("/"),className:"w-full sm:w-auto",children:[(0,d.jsx)(c.Sr,{})," M\u0259\u015fqi bitir"]}):(0,d.jsx)(i.A,{onClick:()=>N(!0),disabled:void 0===g[C[f].id],className:"w-full sm:w-auto",children:"Yoxla"}):(0,d.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,d.jsxs)(i.A,{onClick:()=>j(e=>e-1),disabled:0===f||w,variant:"secondary",children:[(0,d.jsx)(c.A6,{})," Geri"]}),(0,d.jsxs)("span",{children:[f+1," / ",C.length]}),f<C.length-1?(0,d.jsxs)(i.A,{onClick:()=>j(e=>e+1),disabled:w,children:["\u0130r\u0259li ",(0,d.jsx)(c.fl,{})]}):(0,d.jsx)(i.A,{onClick:q,disabled:w,children:w?"G\xf6nd\u0259rilir...":(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.Sr,{})," Bitir"]})})]})})]})});var O}}}]);
//# sourceMappingURL=178.3abde409.chunk.js.map