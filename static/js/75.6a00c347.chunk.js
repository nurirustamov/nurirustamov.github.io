"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[75],{3075:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(9379),l=t(5043),n=t(3216),r=t(5263),i=t(8132),c=t(4450),d=t(3918),o=t(9207),m=t(579);const x=e=>{let{articles:s,quizzes:t,onStartQuiz:x,onMarkAsRead:h,articleProgress:u,profile:p,fetchComments:f,postComment:j,deleteComment:g}=e;const{articleId:v}=(0,n.g)(),y=(0,n.Zp)(),b=(0,l.useMemo)(()=>{if(!s||!t)return null;const e=s.find(e=>e.id===Number(v));if(!e)return null;const l=new Set((e.article_quizzes||[]).map(e=>e.quiz_id)),n=t.filter(e=>l.has(e.id));return(0,a.A)((0,a.A)({},e),{},{quizzes:n})},[s,t,v]),N=(0,l.useMemo)(()=>u.some(e=>e.article_id===Number(v)),[u,v]);return b?(0,m.jsxs)("div",{className:"animate-fade-in max-w-4xl mx-auto space-y-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)(c.A,{variant:"secondary",onClick:()=>y("/articles"),children:[(0,m.jsx)(d.A6,{})," M\u0259qal\u0259l\u0259r siyah\u0131s\u0131na qay\u0131t"]}),N?(0,m.jsxs)("span",{className:"flex items-center font-semibold text-green-600",children:[(0,m.jsx)(d.C1,{className:"w-6 h-6 mr-2"})," Oxunub"]}):(0,m.jsx)(c.A,{onClick:()=>h(b.id),children:"Oxunmu\u015f kimi i\u015far\u0259l\u0259"})]}),(0,m.jsxs)(i.A,{children:[(0,m.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:b.title}),(0,m.jsx)("div",{className:"prose max-w-none",children:(0,m.jsx)(r.oz,{children:b.content})}),(0,m.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,m.jsx)(o.A,{targetId:b.id,targetType:"article",profile:p,fetchComments:f,postComment:j,deleteComment:g})})]}),b.quizzes&&b.quizzes.length>0&&(0,m.jsxs)(i.A,{children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"M\xf6vzuya aid testl\u0259r"}),(0,m.jsx)("div",{className:"space-y-3",children:b.quizzes.map(e=>(0,m.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:[e.questions.length," sual"]})]}),(0,m.jsxs)(c.A,{onClick:()=>x(e.id),children:[(0,m.jsx)(d.ud,{})," Test\u0259 Ba\u015fla"]})]},e.id))})]})]}):(0,m.jsx)(i.A,{children:(0,m.jsx)("p",{className:"text-center",children:"M\u0259qal\u0259 tap\u0131lmad\u0131."})})}},8132:(e,s,t)=>{t.d(s,{A:()=>l});t(5043);var a=t(579);const l=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(t),children:s})}},9207:(e,s,t)=>{t.d(s,{A:()=>m});var a=t(9379),l=t(5043),n=t(3216),r=t(5475),i=t(4450),c=t(3918),d=t(579);const o=e=>{var s;let{comment:t,onReply:a,onDelete:n,profile:r}=e;const[m,x]=(0,l.useState)(!1),[h,u]=(0,l.useState)("");return(0,d.jsxs)("div",{className:"flex flex-col gap-2 p-3 rounded-lg bg-white shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-orange-200 flex items-center justify-center font-bold text-orange-600",children:(null===(s=t.profiles.first_name)||void 0===s?void 0:s[0])||"U"}),(0,d.jsxs)("span",{className:"font-semibold text-gray-800",children:[t.profiles.first_name," ",t.profiles.last_name]})]}),(0,d.jsx)("span",{className:"text-xs text-gray-400",children:new Date(t.created_at).toLocaleString()})]}),(0,d.jsx)("p",{className:"text-gray-700 pl-10",children:t.content}),(0,d.jsxs)("div",{className:"flex items-center justify-end gap-2 pl-10",children:[r&&(0,d.jsxs)(i.A,{variant:"secondary",size:"sm",onClick:()=>x(!m),children:[(0,d.jsx)(c.Sb,{})," Cavab ver"]}),(null===r||void 0===r?void 0:r.id)===t.user_id&&(0,d.jsx)(i.A,{variant:"danger",size:"sm",onClick:()=>n(t.id),children:(0,d.jsx)(c.uc,{})})]}),m&&(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h.trim()&&(a(h,t.id),u(""),x(!1))},className:"pl-10 mt-2 flex gap-2",children:[(0,d.jsx)("input",{type:"text",value:h,onChange:e=>u(e.target.value),placeholder:"Cavab verilir: ".concat(t.profiles.first_name,"..."),className:"flex-grow mt-1 block w-full rounded-md border-gray-300 shadow-sm text-sm"}),(0,d.jsx)(i.A,{type:"submit",size:"sm",children:"G\xf6nd\u0259r"})]}),t.children&&t.children.length>0&&(0,d.jsx)("div",{className:"pl-6 border-l-2 border-orange-100 mt-2 space-y-3",children:t.children.map(e=>(0,d.jsx)(o,{comment:e,onReply:a,onDelete:n,profile:r},e.id))})]})},m=e=>{let{targetId:s,targetType:t,profile:c,fetchComments:m,postComment:x,deleteComment:h}=e;const[u,p]=(0,l.useState)([]),[f,j]=(0,l.useState)(""),g=(0,n.zy)();(0,l.useEffect)(()=>{s&&t&&(async()=>{const e=await m(s,t);p(e||[])})()},[s,t,m]);const v=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const l="".concat(g.pathname,"#comment-").concat(a||"new");if(await x(s,t,e,a,l)){const e=await m(s,t);p(e||[]),a||j("")}},y=async e=>{await h(e)&&p(s=>s.filter(s=>s.id!==e))},b=(0,l.useMemo)(()=>{const e={},s=[];return u.forEach(s=>{e[s.id]=(0,a.A)((0,a.A)({},s),{},{children:[]})}),u.forEach(t=>{t.parent_comment_id&&e[t.parent_comment_id]?e[t.parent_comment_id].children.push(e[t.id]):s.push(e[t.id])}),s},[u]);return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["\u015e\u0259rhl\u0259r (",u.length,")"]}),c&&(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v(f)},className:"flex gap-2 items-start",children:[(0,d.jsx)("textarea",{value:f,onChange:e=>j(e.target.value),placeholder:"\u015e\u0259rhinizi yaz\u0131n...",className:"flex-grow mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:"3"}),(0,d.jsx)(i.A,{type:"submit",children:"G\xf6nd\u0259r"})]}),!c&&(0,d.jsxs)("p",{className:"text-center p-4 bg-gray-50 rounded-md",children:["\u015e\u0259rh yazmaq \xfc\xe7\xfcn ",(0,d.jsx)(r.N_,{to:"/auth",className:"text-orange-600 font-semibold hover:underline",children:"daxil olun"}),"."]}),(0,d.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,d.jsx)(o,{comment:e,onReply:v,onDelete:y,profile:c},e.id))})]})}}}]);
//# sourceMappingURL=75.6a00c347.chunk.js.map