"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[250],{7250:(e,r,s)=>{s.r(r),s.d(r,{default:()=>u});var t=s(9379),n=s(5043),a=s(3216),i=s(8132),l=s(4450),o=s(3918),d=s(579);const c=(e,r)=>{if(void 0===r||null===r)return!1;if("open"===e.type)return!1;switch(e.type){case"single":return r===e.options[e.correctAnswers[0]];case"multiple":const s=e.correctAnswers.map(r=>e.options[r]).sort(),t=r?[...r].sort():[];return!!Array.isArray(r)&&JSON.stringify(s)===JSON.stringify(t);case"textInput":return r.trim().toLowerCase()===e.correctAnswers[0].trim().toLowerCase();case"trueFalse":return r===e.correctAnswer;case"ordering":return JSON.stringify(r)===JSON.stringify(e.orderItems);case"fillInTheBlanks":return!(!Array.isArray(r)||r.length!==e.correctAnswers.length)&&r.every((r,s)=>(r||"").trim().toLowerCase()===(e.correctAnswers[s]||"").trim().toLowerCase());default:return!1}},m=e=>{let{q:r,index:s,answers:t,handleAnswerChange:a,isPracticeMode:i,isAnswerChecked:m,shuffledOptions:u,isSubmitting:x}=e;(0,n.useEffect)(()=>{if("ordering"===r.type&&!t[r.id]){const e=[...r.orderItems].sort(()=>Math.random()-.5);a(r.id,e)}},[r.type,r.id,r.orderItems,t,a]);const g=(e,r,s)=>{const n=t[e];if(!n)return;const i=[...n],l=r+s;l<0||l>=i.length||([i[r],i[l]]=[i[l],i[r]],a(e,i))},h=r.shuffleOptions&&u[r.id]?u[r.id]:r.options,b=(e,s)=>{var n;if(!i||!m)return"border-transparent";let a=!1;if("single"===r.type&&(a=s===r.correctAnswers[0]),"multiple"===r.type&&(a=r.correctAnswers.includes(s)),a)return"border-green-500 bg-green-100";let l=!1;return"single"===r.type&&(l=t[r.id]===e),"multiple"===r.type&&(l=null===(n=t[r.id])||void 0===n?void 0:n.includes(e)),l?"border-red-500 bg-red-100":"border-transparent"};if("fillInTheBlanks"===r.type){const e=r.text.split(/(\[.*?\])/g).filter(e=>e);let n=-1;return(0,d.jsxs)("div",{className:"bg-orange-50 p-4 sm:p-6 rounded-lg mb-6",children:[(0,d.jsxs)("h3",{className:"font-semibold text-lg sm:text-xl text-gray-800 mb-4",children:[s+1,". C\xfcml\u0259ni tamamlay\u0131n:"]}),r.imageUrl&&(0,d.jsx)("img",{src:r.imageUrl,alt:"Question illustration",className:"my-4 rounded-lg max-h-60 w-full object-contain mx-auto",onError:e=>e.target.style.display="none"}),(0,d.jsx)("div",{className:"text-lg leading-loose",children:e.map((e,s)=>{if(e.startsWith("[")&&e.endsWith("]")){n++;const e=n,l=(t[r.id]||[])[e]||"",o=r.correctAnswers[e]||"";let c="border-gray-400 focus:border-orange-500";if(i&&m){c=l.trim().toLowerCase()===o.trim().toLowerCase()?"border-green-500 bg-green-100":"border-red-500 bg-red-100"}return(0,d.jsxs)("span",{className:"inline-block",children:[(0,d.jsx)("input",{type:"text",value:l,onChange:s=>{const n=[...t[r.id]||[]];n[e]=s.target.value,a(r.id,n)},className:"inline-block w-32 sm:w-40 mx-1 p-1 border-b-2 bg-transparent outline-none text-center ".concat(c),disabled:x||i&&m}),i&&m&&l.trim().toLowerCase()!==o.trim().toLowerCase()&&(0,d.jsxs)("span",{className:"text-xs text-green-600 font-semibold",children:["(",o,")"]})]},s)}return(0,d.jsx)("span",{children:e},s)})})]},r.id)}return(0,d.jsxs)("div",{className:"bg-orange-50 p-4 sm:p-6 rounded-lg mb-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("h3",{className:"font-semibold text-lg sm:text-xl text-gray-800 mb-4 flex-1",children:[s+1,". ",r.text]}),(0,d.jsx)("button",{onClick:()=>(e=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const r=new SpeechSynthesisUtterance(e);r.lang="az-AZ",window.speechSynthesis.speak(r)}else alert("Sizin brauzeriniz m\u0259tni s\u0259sl\u0259ndirm\u0259yi d\u0259st\u0259kl\u0259mir.")})(r.text),className:"text-gray-500 hover:text-orange-500 ml-2 sm:ml-4 p-2",children:(0,d.jsx)(o.pD,{})})]}),r.audioUrl&&(0,d.jsx)("div",{className:"my-4",children:(0,d.jsx)("audio",{controls:!0,src:r.audioUrl,className:"w-full",children:"Your browser does not support the audio element."})}),r.imageUrl&&(0,d.jsx)("img",{src:r.imageUrl,alt:"Question illustration",className:"my-4 rounded-lg max-h-60 w-full object-contain mx-auto",onError:e=>e.target.style.display="none"}),"single"===r.type&&h.map((e,s)=>(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsxs)("label",{className:"block p-3 rounded-lg hover:bg-orange-100 cursor-pointer border-2 ".concat(b(e,s)),children:[(0,d.jsx)("input",{type:"radio",name:r.id,value:e,checked:t[r.id]===e,onChange:e=>a(r.id,e.target.value),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500",disabled:i&&m||x}),e]})},s)),"multiple"===r.type&&h.map((e,s)=>{var n;return(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsxs)("label",{className:"block p-3 rounded-lg hover:bg-orange-100 cursor-pointer border-2 ".concat(b(e,s)),children:[(0,d.jsx)("input",{type:"checkbox",name:r.id,value:e,checked:null===(n=t[r.id])||void 0===n?void 0:n.includes(e),onChange:e=>{const s=t[r.id]||[],n=e.target.checked?[...s,e.target.value]:s.filter(r=>r!==e.target.value);a(r.id,n)},className:"mr-3 h-4 w-4 text-orange-600 rounded focus:ring-orange-500",disabled:i&&m||x}),e]})},s)}),"textInput"===r.type&&(0,d.jsx)("input",{type:"text",value:t[r.id]||"",onChange:e=>a(r.id,e.target.value),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm p-3 ".concat(i&&m?c(r,t[r.id])?"bg-green-100 border-green-500":"bg-red-100 border-red-500":""),placeholder:"Cavab\u0131n\u0131z\u0131 daxil edin...",disabled:i&&m||x}),"trueFalse"===r.type&&(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-2",children:[(0,d.jsxs)("label",{className:"block p-3 rounded-lg hover:bg-orange-100 cursor-pointer flex-1 text-center border-2 ".concat(i&&m&&!0===r.correctAnswer?"border-green-500 bg-green-100":i&&m&&!0===t[r.id]?"border-red-500 bg-red-100":"border-transparent"),children:[(0,d.jsx)("input",{type:"radio",name:r.id,checked:!0===t[r.id],onChange:()=>a(r.id,!0),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500",disabled:i&&m||x})," Do\u011fru"]}),(0,d.jsxs)("label",{className:"block p-3 rounded-lg hover:bg-orange-100 cursor-pointer flex-1 text-center border-2 ".concat(i&&m&&!1===r.correctAnswer?"border-green-500 bg-green-100":i&&m&&!1===t[r.id]?"border-red-500 bg-red-100":"border-transparent"),children:[(0,d.jsx)("input",{type:"radio",name:r.id,checked:!1===t[r.id],onChange:()=>a(r.id,!1),className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500",disabled:i&&m||x})," Yanl\u0131\u015f"]})]}),"ordering"===r.type&&(0,d.jsxs)("div",{className:"space-y-2 mt-4",children:[(t[r.id]||[]).map((e,s)=>(0,d.jsxs)("div",{className:"flex items-center p-3 rounded-lg border-2 ".concat(i&&m?e===r.orderItems[s]?"border-green-500 bg-green-100":"border-red-500 bg-red-100":"bg-white border-gray-200"),children:[(0,d.jsx)("span",{className:"flex-grow text-gray-800",children:e}),(0,d.jsxs)("div",{className:"flex gap-1",children:[(0,d.jsx)(l.A,{variant:"secondary",size:"sm",className:"!p-2",onClick:()=>g(r.id,s,-1),disabled:0===s||x||i&&m,children:(0,d.jsx)(o.Kp,{})}),(0,d.jsx)(l.A,{variant:"secondary",size:"sm",className:"!p-2",onClick:()=>g(r.id,s,1),disabled:s===(t[r.id]||[]).length-1||x||i&&m,children:(0,d.jsx)(o.ZL,{})})]})]},s)),i&&m&&JSON.stringify(t[r.id])!==JSON.stringify(r.orderItems)&&(0,d.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["D\xfczg\xfcn s\u0131ralama: ",r.orderItems.join(", ")]})]}),"open"===r.type&&(0,d.jsx)("textarea",{value:t[r.id]||"",onChange:e=>a(r.id,e.target.value),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm p-3",placeholder:"Cavab\u0131n\u0131z\u0131 bura daxil edin...",rows:"5",disabled:i&&m||x}),i&&m&&r.explanation&&(0,d.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-400",children:(0,d.jsxs)("div",{className:"flex items-start text-sm text-blue-800",children:[(0,d.jsx)("span",{className:"mr-2 mt-1 flex-shrink-0",children:(0,d.jsx)(o.xm,{})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{className:"font-semibold",children:"\u0130zah:"}),(0,d.jsx)("p",{className:"mt-1 whitespace-pre-wrap",children:r.explanation})]})]})})]},r.id)},u=e=>{let{quiz:r,user:s,onSubmit:c,mode:u="exam"}=e;const x=(0,a.Zp)(),[g,h]=(0,n.useState)(()=>{const e={};return(r.questions||[]).forEach(r=>{"textInput"!==r.type&&"open"!==r.type||(e[r.id]="")}),e}),[b]=(0,n.useState)(()=>Date.now()+60*(r.timeLimit||10)*1e3),[p,f]=(0,n.useState)(60*(r.timeLimit||10)),[j,w]=(0,n.useState)(0),[y,N]=(0,n.useState)(!1),[v,k]=(0,n.useState)(!1),A=(0,n.useRef)(null),C=(0,n.useRef)({}),S="practice"===u,q=r.display_all_questions&&!S,z=(0,n.useMemo)(()=>r.shuffleQuestions?[...r.questions].sort(()=>Math.random()-.5):r.questions,[r]),M=(0,n.useMemo)(()=>{if(!r.shuffleOptions)return{};const e={};return z.forEach(r=>{["single","multiple"].includes(r.type)&&(e[r.id]=[...r.options].sort(()=>Math.random()-.5))}),e},[z,r.shuffleOptions]),O=(0,n.useCallback)(()=>{if(A.current&&z[j]){const e=z[j].id,r=(Date.now()-A.current)/1e3;C.current[e]=(C.current[e]||0)+r}A.current=Date.now()},[j,z]);(0,n.useEffect)(()=>{A.current=Date.now()},[j]),(0,n.useEffect)(()=>{const e=z,r=j,s=y;return()=>{!s&&e[r]&&O()}},[y,z,j,O]);const I=(0,n.useCallback)(()=>{y||(O(),N(!0),c&&c(g,z,C.current))},[y,c,g,z,O]);(0,n.useEffect)(()=>{if(S||y)return;let e;const r=()=>{const s=Math.max(0,Math.round((b-Date.now())/1e3));f(e=>e!==s?s:e),s>0?e=requestAnimationFrame(r):I()};return e=requestAnimationFrame(r),()=>cancelAnimationFrame(e)},[S,y,b,I]);const L=(e,r)=>{S&&v||h(s=>(0,t.A)((0,t.A)({},s),{},{[e]:r}))};if(!z||0===z.length)return(0,d.jsx)(i.A,{children:(0,d.jsx)("p",{children:"Bu testd\u0259 h\u0259l\u0259lik sual yoxdur."})});const D=(j+1)/z.length*100;return(0,d.jsx)("div",{className:"animate-fade-in",children:(0,d.jsxs)(i.A,{children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-2 gap-4",children:[(0,d.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-orange-600 text-center sm:text-left",children:r.title}),!S&&(0,d.jsx)("div",{className:"text-2xl font-bold text-orange-500 bg-orange-100 px-4 py-2 rounded-lg w-full sm:w-auto text-center",children:(E=p,"".concat(Math.floor(E/60),":").concat(("0"+E%60).slice(-2)))}),S&&(0,d.jsx)("div",{className:"text-lg font-bold text-blue-500 bg-blue-100 px-4 py-2 rounded-lg w-full sm:w-auto text-center",children:"M\u0259\u015fq Rejimi"})]}),!S&&s&&(0,d.jsxs)("p",{className:"text-center sm:text-left text-gray-600 mb-4",children:["U\u011furlar, ",s.first_name,"!"]}),!q&&!S&&(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-6",children:(0,d.jsx)("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2.5 rounded-full transition-all duration-500",style:{width:"".concat(D,"%")}})}),q?z.map((e,r)=>(0,d.jsx)(m,{q:e,index:r,answers:g,handleAnswerChange:L,isPracticeMode:!1,isAnswerChecked:!1,shuffledOptions:M,isSubmitting:y},e.id)):(0,d.jsx)(m,{q:z[j],index:j,answers:g,handleAnswerChange:L,isPracticeMode:S,isAnswerChecked:v,shuffledOptions:M,isSubmitting:y}),(0,d.jsx)("div",{className:"mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:q?(0,d.jsx)(l.A,{onClick:I,disabled:y,className:"w-full sm:w-auto",children:y?"G\xf6nd\u0259rilir...":(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Sr,{})," Testi Bitir"]})}):S?v?j<z.length-1?(0,d.jsxs)(l.A,{onClick:()=>{O(),k(!1),w(e=>e+1)},className:"w-full sm:w-auto",children:["N\xf6vb\u0259ti ",(0,d.jsx)(o.fl,{})]}):(0,d.jsxs)(l.A,{onClick:()=>x("/"),className:"w-full sm:w-auto",children:[(0,d.jsx)(o.Sr,{})," M\u0259\u015fqi bitir"]}):(0,d.jsx)(l.A,{onClick:()=>k(!0),disabled:void 0===g[z[j].id],className:"w-full sm:w-auto",children:"Yoxla"}):(0,d.jsxs)("div",{className:"w-full flex justify-between items-center",children:[!0===r.allow_back_navigation?(0,d.jsxs)(l.A,{onClick:()=>{O(),w(e=>e-1)},disabled:0===j||y,variant:"secondary",children:[(0,d.jsx)(o.A6,{})," Geri"]}):(0,d.jsx)("div",{}),(0,d.jsxs)("span",{children:[j+1," / ",z.length]}),j<z.length-1?(0,d.jsxs)(l.A,{onClick:()=>{O(),w(e=>e+1)},disabled:y,children:["\u0130r\u0259li ",(0,d.jsx)(o.fl,{})]}):(0,d.jsx)(l.A,{onClick:I,disabled:y,children:y?"G\xf6nd\u0259rilir...":(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Sr,{})," Bitir"]})})]})})]})});var E}},8132:(e,r,s)=>{s.d(r,{A:()=>n});s(5043);var t=s(579);const n=e=>{let{children:r,className:s=""}=e;return(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(s),children:r})}}}]);
//# sourceMappingURL=250.8dc37ba2.chunk.js.map