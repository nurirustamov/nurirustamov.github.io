"use strict";(self.webpackChunkquiztest=self.webpackChunkquiztest||[]).push([[856],{7856:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var l=t(9379),r=t(5043),i=t(5475),a=t(8132),n=t(4450),d=t(3918),c=t(579);const x=e=>{if(!e)return"N/A";const s=new Date(e);return isNaN(s)?"Invalid Date":s.toLocaleString("az-AZ",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},m=e=>{let{quests:s}=e;if(!s||0===s.length)return null;const t=s.filter(e=>"DAILY"===e.quests.type),l=s.filter(e=>"WEEKLY"===e.quests.type),r=e=>{let{title:s,questsOfType:t}=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:s}),t.length>0?(0,c.jsx)("div",{className:"space-y-3",children:t.map(e=>{const s=e.quests.goal_value>0?e.progress/e.quests.goal_value*100:0,t="completed"===e.status;return(0,c.jsxs)("div",{className:"p-3 rounded-lg ".concat(t?"bg-green-100 border-l-4 border-green-400":"bg-gray-50"),children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"font-bold text-gray-800",children:e.quests.title}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:e.quests.description})]}),(0,c.jsxs)("div",{className:"text-right flex-shrink-0 ml-4",children:[(0,c.jsxs)("p",{className:"font-bold text-yellow-500 flex items-center gap-1",children:[(0,c.jsx)(d.Gg,{className:"w-4 h-4"})," +",e.quests.reward_xp," XP"]}),t&&(0,c.jsxs)("div",{className:"flex items-center justify-end gap-1 text-xs text-green-600 font-semibold mt-1",children:[(0,c.jsx)(d.C1,{className:"w-4 h-4"}),"Tamamland\u0131!"]})]})]}),!t&&(0,c.jsxs)("div",{className:"mt-2",children:[(0,c.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,c.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Proqres"}),(0,c.jsxs)("span",{className:"text-xs font-medium text-orange-700",children:[e.progress," / ",e.quests.goal_value]})]}),(0,c.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,c.jsx)("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"".concat(s,"%")}})})]})]},e.id)})}):(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Bu d\xf6vr \xfc\xe7\xfcn tap\u015f\u0131r\u0131q yoxdur."})]})};return(0,c.jsxs)(a.A,{children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"M\u0259qs\u0259dl\u0259r v\u0259 Tap\u015f\u0131r\u0131qlar"}),(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)(r,{title:"G\xfcnl\xfck M\u0259qs\u0259dl\u0259r",questsOfType:t}),(0,c.jsx)(r,{title:"H\u0259ft\u0259lik M\u0259qs\u0259dl\u0259r",questsOfType:l})]})]})},o=e=>{let{groups:s,className:t=""}=e;return s&&0!==s.length?(0,c.jsx)("div",{className:t,children:(0,c.jsxs)(a.A,{children:[(0,c.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,c.jsx)(d.K6,{})," M\u0259nim Qruplar\u0131m"]}),(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(e=>{var s,t;return(0,c.jsxs)(i.N_,{to:"/groups/".concat(e.id),className:"block p-4 rounded-lg bg-gray-50 hover:bg-orange-50 transition-colors border flex flex-col justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-bold text-gray-800",children:e.name}),(0,c.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[(null===(s=e.members)||void 0===s?void 0:s.length)||0," \xfczv"]})]}),(0,c.jsxs)("div",{className:"flex items-center -space-x-2 mt-3",children:[(e.members||[]).slice(0,5).map(e=>{var s,t,l,r;return(0,c.jsx)("div",{className:"w-8 h-8 rounded-full bg-orange-200 flex items-center justify-center text-orange-700 font-bold text-xs border-2 border-white",title:"".concat((null===(s=e.profiles)||void 0===s?void 0:s.first_name)||""," ").concat((null===(t=e.profiles)||void 0===t?void 0:t.last_name)||""),children:(null===(l=e.profiles)||void 0===l||null===(r=l.first_name)||void 0===r?void 0:r[0])||"U"},e.user_id)}),((null===(t=e.members)||void 0===t?void 0:t.length)||0)>5&&(0,c.jsxs)("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-700 font-bold text-xs border-2 border-white",children:["+",e.members.length-5]})]})]},e.id)})})]})}):null},u=e=>{let{assignments:s,quizzes:t,courses:u,quizResults:h,completedCourses:g,onStartQuiz:j,userQuests:f,studentGroups:p,profile:b}=e;const N=(0,r.useMemo)(()=>{if(!b||!p)return[];if("admin"===b.role){const e=new Set,s=[];return(p||[]).forEach(t=>{const l=t.members.some(e=>e.user_id===b.id),r=t.created_by===b.id;!l&&!r||e.has(t.id)||(s.push(t),e.add(t.id))}),s}return(p||[]).filter(e=>e.members.some(e=>e.user_id===b.id))},[p,b]),v=(0,r.useMemo)(()=>{const e=new Set((h||[]).map(e=>e.quizId)),r=new Set((g||[]).map(e=>e.course_id));return s.map(s=>{let i=null,a=!1;return"quiz"===s.item_type?(i=t.find(e=>e.id===s.item_id),i&&(a=e.has(i.id))):"course"===s.item_type&&(i=u.find(e=>e.id===s.item_id),i&&(a=r.has(i.id))),(0,l.A)((0,l.A)({},s),{},{item:i,isCompleted:a})}).filter(e=>e.item)},[s,t,u,h,g]),y=new Date,q=v.filter(e=>!e.isCompleted),w=v.filter(e=>e.isCompleted),_=e=>{var s;let{assignment:t}=e;const{item:l,item_type:r,due_date:m,isCompleted:o}=t,u=!o&&m&&new Date(m)<y;return(0,c.jsxs)(a.A,{className:"border-l-4 ".concat(o?"border-green-500 bg-green-50/50 opacity-70":u?"border-red-500":"border-gray-200"),children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[(0,c.jsxs)("div",{className:"flex-grow",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:["quiz"===r?(0,c.jsx)(d.AQ,{className:"text-purple-500"}):(0,c.jsx)(d.cZ,{className:"text-blue-500"}),(0,c.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider",children:"quiz"===r?"Test":"Kurs"})]}),(0,c.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:l.title})]}),(0,c.jsx)("div",{className:"flex-shrink-0 w-full sm:w-auto",children:o?(0,c.jsxs)("p",{className:"text-sm font-semibold flex items-center gap-2 text-green-600",children:[(0,c.jsx)(d.C1,{}),(0,c.jsx)("span",{children:"Tamamlan\u0131b"})]}):(0,c.jsxs)("p",{className:"text-sm font-semibold flex items-center gap-2 ".concat(u?"text-red-600":"text-gray-600"),children:[(0,c.jsx)(d.O4,{}),(0,c.jsxs)("span",{children:["Son tarix: ",x(m)||"Yoxdur"]})]})})]}),(0,c.jsx)("div",{className:"mt-4 flex justify-end",children:o?(0,c.jsx)(i.N_,{to:"quiz"===r?"/review/".concat(null===(s=h.find(e=>e.quizId===l.id))||void 0===s?void 0:s.id):"/courses/".concat(l.id),children:(0,c.jsxs)(n.A,{variant:"secondary",size:"sm",children:[(0,c.jsx)(d.bM,{})," N\u0259tic\u0259y\u0259 bax"]})}):"quiz"===r?(0,c.jsxs)(n.A,{onClick:()=>j(l.id),children:[(0,c.jsx)(d.ud,{})," Ba\u015fla"]}):(0,c.jsx)(i.N_,{to:"/courses/".concat(l.id),children:(0,c.jsxs)(n.A,{children:[(0,c.jsx)(d.ud,{})," Ba\u015fla"]})})})]})};return(0,c.jsxs)("div",{className:"animate-fade-in space-y-8",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-4",children:"Tap\u015f\u0131r\u0131qlar\u0131m"}),(0,c.jsx)(o,{groups:N,className:"mb-8"}),(0,c.jsx)(m,{quests:f})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"M\xfc\u0259llim T\u0259r\u0259find\u0259n Veril\u0259n Tap\u015f\u0131r\u0131qlar"}),q.length>0?(0,c.jsx)("div",{className:"space-y-4",children:q.map(e=>(0,c.jsx)(_,{assignment:e},e.id))}):(0,c.jsx)(a.A,{className:"text-center py-12",children:(0,c.jsx)("p",{className:"text-gray-500",children:"Aktiv tap\u015f\u0131r\u0131\u011f\u0131n\u0131z yoxdur. Af\u0259rin!"})})]}),w.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Tamamlanm\u0131\u015f Tap\u015f\u0131r\u0131qlar"}),(0,c.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,c.jsx)(_,{assignment:e},e.id))})]})]})}},8132:(e,s,t)=>{t.d(s,{A:()=>r});t(5043);var l=t(579);const r=e=>{let{children:s,className:t=""}=e;return(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 ".concat(t),children:s})}}}]);
//# sourceMappingURL=856.307fb949.chunk.js.map